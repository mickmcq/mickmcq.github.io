/* all.min.js - Projector skin scripts */
var VER='1.3.3',DEBUG=false;
;Texts = {closeWindow:'Close window',okButton:'OK',warning:'Warning',error:'Error',today:'today',yesterday:'yesterday',daysAgo:'{0} days ago',monthsAgo:'{0} months ago',yearsAgo:'{0} years ago',addCart:'Add to Cart',shoppingCart:'Shopping cart',edit:'Edit',continueShopping:'Continue shopping',buyNow:'Buy Now',processedByPaypal:'Payment processed by PayPal',viewCart:'View Cart',emptyCart:'Empty Cart',removeAllItems:'Remove all items?',yes:'Yes',no:'No',item:'item',items:'items',success:'Success',couponCode:'Coupon code',redeem:'Redeem',noSuch:'No such coupon exists!',expired:'The coupon code <b>{0}</b> has expired!',lowerThanCurrent:'This coupon offers lower discount than the current <b>{0}</b>.',reclaimed:'This coupon has already been used!',subtotal:'Subtotal',total:'Total',shippingAndHandling:'Shipping and handling',reduction:'Reduction',discount:'Discount',tax:'Tax',remove:'Remove',couponAccepted:'Coupon code accepted, discounting <b>{0}</b>.',couponRemoved:'Coupon has been removed.',amountLowerThan:'The amount is lower than the discount <b>{0}</b>.',addMoreItems:'Add {0} more item(s) to use this coupon!',validAbove:'Valid only above {0} cart value.',higherThanTotal:'Coupon provides higher discount (<b>{0}</b>) than the cart total.',minAmountWarning:'This coupon can only be used if the total amount exceeds <b>{0}</b>.',minQuantityWarning:'This coupon can only be used if the number of items exceeds <b>{0}</b>.',maxNItems:'Maximum <b>{0}</b> items allowed!',continueBrowsing:'Continue browsing',feedback:'Feedback',feedbackOnAlbum:'Feedback on album "{0}"',overLimitWarning:'This is too much to pass to the email application directly. Please copy / paste the text below to the email body!',share:'Share',shareOn:'Share on',checkThisOut:'Check this out',localWarning:'CanÂ´t share local albums. Please upload your album first!',foundNTimes:'{0} image(s)',notFound:'not found',search:'Search',newImages:'New images',label:'Label',return:'return',and:'and',newItem:'NEW',today:'today',inThePast24Hours:'In the past24 hours',inThePast48Hours:'In the past48 hours',inTheLastDay:'in the last day',inThePastNDays:'in the past {0} days',inThePastNMonths:'in the past {0} months',inThePastNYears:'in the past {0} years',sinceMyLastVisit:'since my last visit',imagesAdded:'Images added',imagesModified:'Images modified',imagesTaken:'Images taken',startSlideshow:'Start slideshow',startSlideshowShort:'Play',atFirstPage:'At first page',atLastPage:'At last page',atLastPageQuestion:'Where to go next?',startOver:'Start over',backToHome:'Back to home',stop:'Stop',pause:'Pause',pauseShort:'Pause',upOneLevel:'Up one level',upOneLevelShort:'Exit',backToCover:'Back to cover page',previousPicture:'Previous picture',previousPictureShort:'Prev',nextPicture:'Next picture',nextPictureShort:'Next',previousFolder:'Previous folder',nextFolder:'Next folder',oneToOneSize:'1:1 size',oneToOneSizeShort:'1:1',fitToScreen:'Fit to screen',fitToScreenShort:'Fit',showInfo:'Show caption / info',showInfoShort:'Info',hideInfo:'Hide caption / info',hideInfoShort:'Hide info',showThumbs:'Show thumbnails',showThumbsShort:'Thumbnails',hideThumbs:'Hide thumbnails',hideThumbsShort:'Hide thumbs',clickToOpen:'Click to open this document with the associated viewer',metaBtn:'Photo data',metaLabel:'Display photographic (Exif/Iptc) data',mapBtn:'Map',mapLabel:'Show the photo location on map',shopBtn:'Buy',shopLabel:'Add this item to the shopping cart',shareBtn:'Share',shareLabel:'Share this photo over social sites',download:'Download',print:'Print',printLabel:'Print out this photo on your printer',fotomotoBtn:'Buy / Share',fotomotoLabel:'Buy prints or digital files, share, send free eCards',regionsBtn:'People',regionsLabel:'Show tagged people',sendFeedback:'Send feedback',message:'Message',subject:'Subject',comment:'Comment',yourEmail:'Your email',send:'Send',messageSent:'Message sent',errorSending:'Error sending',tooLong:'Too long',emailMissing:'Email missing',noItemsSelected:'No items selected',selectItemsHint:'Select the desired items first!',scrollTopTooltip:'Top',more:'more',less:'less',locationWarning:'Works only when uploaded',cookiePolicyText:'This album is using cookies to remember your preferences. It does not track you, nor does it store any personal data.',cookiePolicyAgree:'Got it',cookiePolicyLearnMore:'Learn more',gdprComplianceText:'This site is using the following external services that might track your visits anonymously. Disabling tracking will stop their functionality.',allowAll:'Allow all',denyAll:'Deny all',allowSelected:'Allow selected'};
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("whatInput",[],t):"object"==typeof exports?exports.whatInput=t():e.whatInput=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";e.exports=function(){if("undefined"==typeof document||"undefined"==typeof window)return{ask:function(){return"initial"},element:function(){return null},ignoreKeys:function(){},specificKeys:function(){},registerOnChange:function(){},unRegisterOnChange:function(){}};var e=document.documentElement,t=null,n="initial",o=n;try{window.sessionStorage.getItem("what-input")&&(n=window.sessionStorage.getItem("what-input")),window.sessionStorage.getItem("what-intent")&&(o=window.sessionStorage.getItem("what-intent"))}catch(e){}var i=null,r=["input","select","textarea"],s=[],u=[16,17,18,91,93],a=[],d={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"},c=!1,w=!1,f={x:null,y:null},p={2:"touch",3:"touch",4:"mouse"},l=!1;try{var m=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,m)}catch(e){}var h=function(){var e=!!l&&{passive:!0};window.PointerEvent?(window.addEventListener("pointerdown",v),window.addEventListener("pointermove",g)):window.MSPointerEvent?(window.addEventListener("MSPointerDown",v),window.addEventListener("MSPointerMove",g)):(window.addEventListener("mousedown",v),window.addEventListener("mousemove",g),"ontouchstart"in window&&(window.addEventListener("touchstart",x,e),window.addEventListener("touchend",v))),window.addEventListener(b(),g,e),window.addEventListener("keydown",x),window.addEventListener("keyup",x),window.addEventListener("focusin",E),window.addEventListener("focusout",L)},v=function(e){if(!c){var t=e.which,i=d[e.type];"pointer"===i&&(i=S(e));var s=!a.length&&-1===u.indexOf(t),w=a.length&&-1!==a.indexOf(t),f="keyboard"===i&&t&&(s||w)||"mouse"===i||"touch"===i;if(n!==i&&f){n=i;try{window.sessionStorage.setItem("what-input",n)}catch(e){}y("input")}if(o!==i&&f){var p=document.activeElement;if(p&&p.nodeName&&-1===r.indexOf(p.nodeName.toLowerCase())){o=i;try{window.sessionStorage.setItem("what-intent",o)}catch(e){}y("intent")}}}},y=function(t){e.setAttribute("data-what"+t,"input"===t?n:o),I(t)},g=function(e){if(O(e),!c&&!w){var t=d[e.type];if("pointer"===t&&(t=S(e)),o!==t){o=t;try{window.sessionStorage.setItem("what-intent",o)}catch(e){}y("intent")}}},E=function(n){n.target.nodeName?(t=n.target.nodeName.toLowerCase(),e.setAttribute("data-whatelement",t),n.target.classList&&n.target.classList.length&&e.setAttribute("data-whatclasses",n.target.classList.toString().replace(" ",","))):L()},L=function(){t=null,e.removeAttribute("data-whatelement"),e.removeAttribute("data-whatclasses")},x=function(e){v(e),window.clearTimeout(i),c=!0,i=window.setTimeout(function(){c=!1},100)},S=function(e){return"number"==typeof e.pointerType?p[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType},b=function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},I=function(e){for(var t=0,i=s.length;t<i;t++)s[t].type===e&&s[t].fn.call(void 0,"input"===e?n:o)},O=function(e){f.x!==e.screenX||f.y!==e.screenY?(w=!1,f.x=e.screenX,f.y=e.screenY):w=!0};return"addEventListener"in window&&Array.prototype.indexOf&&(d[b()]="mouse",h(),y("input"),y("intent")),{ask:function(e){return"intent"===e?o:n},element:function(){return t},ignoreKeys:function(e){u=e},specificKeys:function(e){a=e},registerOnChange:function(e,t){s.push({fn:e,type:t||"input"})},unRegisterOnChange:function(e){var t=function(e){for(var t=0,n=s.length;t<n;t++)if(s[t].fn===e)return t}(e);(t||0===t)&&s.splice(t,1)}}}()}])});
window.console=window.console||{log:function(t){}},String.prototype.hasOwnProperty("trim")||(String.wsp=[],String.wsp[9]=!0,String.wsp[10]=!0,String.wsp[11]=!0,String.wsp[12]=!0,String.wsp[13]=!0,String.wsp[32]=!0,String.wsp[133]=!0,String.wsp[160]=!0,String.wsp[5760]=!0,String.wsp[6158]=!0,String.wsp[8192]=!0,String.wsp[8193]=!0,String.wsp[8194]=!0,String.wsp[8195]=!0,String.wsp[8196]=!0,String.wsp[8197]=!0,String.wsp[8198]=!0,String.wsp[8199]=!0,String.wsp[8200]=!0,String.wsp[8201]=!0,String.wsp[8202]=!0,String.wsp[8203]=!0,String.wsp[8232]=!0,String.wsp[8233]=!0,String.wsp[8239]=!0,String.wsp[8287]=!0,String.wsp[12288]=!0,String.prototype.trim=function(){var t=this+"",e=t.length;if(e){var n=String.wsp,r=0;for(--e;e>=0&&n[t.charCodeAt(e)];)--e;for(++e;r<e&&n[t.charCodeAt(r)];)++r;t=t.substring(r,e)}return t}),String.prototype.hasOwnProperty("trunc")||(String.prototype.trunc=function(t){var e=this+"";if(e.length<=t)return e.toString();var n=e.substring(0,t-1),r=n.lastIndexOf(" ");return(r>6&&n.length-r<20?n.substring(0,r):n)+"..."}),String.prototype.hasOwnProperty("startsWith")||(String.prototype.startsWith=function(t){return 0===(this+"").indexOf(t)}),String.prototype.hasOwnProperty("endsWith")||(String.prototype.endsWith=function(t){return(this+"").substring(this.length-t.length)===t}),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.unCamelCase=function(){return this.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},String.prototype.getExt=function(){var t=this+"",e=t.lastIndexOf(".");return e<=0||e>=t.length-1?"":t.substring(e+1).toLowerCase()},String.prototype.stripExt=function(){var t=this+"",e=t.lastIndexOf(".");return e<=0||e>t.length-1?t:t.substring(0,e)},String.prototype.hasExt=function(t){var e=this+"",n=e.lastIndexOf(".");return n>=0&&(e=e.substring(n+1).toLowerCase(),(t+",").indexOf(e+",")>=0)},String.prototype.replaceExt=function(t){var e=this+"",n=e.lastIndexOf(".");return n<=0?e:e.substring(0,n+1)+t},String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")},String.prototype.getDir=function(){var t=(this+"").split("#")[0];return t.substring(0,t.lastIndexOf("/")+1)},String.prototype.getFile=function(){var t=(this+"").split("#")[0];return t.substring(t.lastIndexOf("/")+1)},String.prototype.getRelpath=function(t){var e=this+"",n=e.lastIndexOf("#");for(-1===n?n=e.length-1:n--;n>=0&&("/"!==e[n]||0!=t--);n--);return e.substring(n+1)},String.prototype.fixUrl=function(){for(var t,e,n=this+"";(t=n.indexOf("../"))>0;){if(1===t||-1===(e=n.lastIndexOf("/",t-2)))return n.substring(t+3);n=n.substring(0,e)+n.substring(t+2)}return n},String.prototype.fullUrl=function(){var t=this+"";return t.match(/^(http|ftp|file)/)||(t=window.location.href.getDir()+t),t.fixUrl()},String.prototype.cleanupHTML=function(){for(var t=[[/<(b|h)r\/?>/gi,"\n"],[/\&amp;/g,"&"],[/\&nbsp;/g," "],[/\&lt;/g,"<"],[/\&gt;/g,">"],[/\&(m|n)dash;/g,"-"],[/\&apos;/g,"'"],[/\&quot;/g,'"']],e=this+"",n=t.length-1;n>=0;n--)e=e.replace(t[n][0],t[n][1]);return e.replace},String.prototype.stripHTML=function(t){var e=this+"";return t&&(e=e.cleanupHTML()),e.replace(/<\/?[^>]+>/g,"")},String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")},String.prototype.appendSep=function(t,e){return(this.length?this+(e||" &middot; "):"")+t},String.prototype.rgb2hex=function(){var t=this+"";if("#"===t.charAt(0)||"transparent"===t)return t;var e,n=t.match(/\d+/g),r="";if(n){for(var o=0;o<n.length&&o<3;++o)r+=((e=parseInt(n[o],10).toString(16)).length<2?"0":"")+e;return"#"+r}return"transparent"},String.prototype.template=function(t){if(void 0===t||!this)return this;!isNaN(parseFloat(t))&&isFinite(t)&&(t+="");var e=this+"";if(t.constructor===Array)for(var n=0;n<t.length;++n)e=e.replace(new RegExp("\\{"+n+"\\}","gi"),t[n]);else e=e.replace(/\{0\}/gi,t);return e},String.prototype.getSearchTerms=function(){var t=this+"";if(-1===t.indexOf('"'))return t.split(" ");var e,n=[];do{if((e=t.indexOf('"'))>0&&n.push.apply(n,t.substring(0,e).split(" ")),t=t.substring(e+1),(e=t.indexOf('"'))<0){n.push(t);break}n.push(t.substring(0,e)),t=t.substring(e+1)}while(t.length);return n},String.prototype.objectify=function(){if(!this||!this.length)return this;var t=this+"";"?"!==t.charAt(0)&&"#"!==t.charAt(0)||(t=t.substring(1));for(var e,n={},r=t.split("&"),o=0,i=r.length;o<i;++o)(e=r[o].split("=")).length>1&&(n[e[0]]=decodeURIComponent(e[1]));return n},String.prototype.testIn=function(t){return"string"!=typeof t&&(t+=""),new RegExp(this,"i").test(t)},String.prototype.testExactMatch=function(t){if(t.constructor!==Array)return this==t+"";for(var e=0,n=t.length;e<n;++e)if(this==t[e])return!0;return!1},String.prototype.fixjAlbumPaths=function(t,e,n){var r=(this+"").replace(/\%24/g,"$");return t&&(r=r.replace(/\${resPath}/g,t)),e&&(r=r.replace(/\${rootPath}/g,e)),n&&(r=r.replace(/\${relPath}/g,n)),r},String.prototype.testMatch=function(t){if(typeof t===UNDEF)return!1;var e=this.toLowerCase();if(t.constructor!==Array)return e===(t+"").toLowerCase();for(var n=0,r=t.length;n<r;++n)if(e===t[n].toLowerCase())return!0;return!1},String.prototype.searchTerm=function(t,e,n){if(typeof t===UNDEF||!this.length)return!1;var r=(this+"").toLowerCase(),e=typeof e!==UNDEF&&e,n=typeof n!==UNDEF&&n,o=function(t,n){return t=" "+t+" ",n.indexOf("(")>=0||n.indexOf(")")>=0||n.indexOf(".")>=0||n.indexOf("+")>=0||n.indexOf("[")>=0||n.indexOf("]")>=0?-1!==(e?t.indexOf(" "+n.toLowerCase()+" "):t.indexOf(n.toLowerCase())):-1!==t.search(new RegExp("\\W"+n+(e?"\\W":""),"i"))};if(t.constructor===Array&&1===t.length&&(t=t[0]),t.constructor===Array){var i,a=t.length,s=0;for(i=0;i<a;i++)if(o(r,t[i])){if(!n)return!0;s++}else if(n)return!1;return s===a}return o(r,t)},String.prototype.hashCode=function(){for(var t=0,e=0,n=this.length;e<n;++e)t=(t<<5)-t+this.charCodeAt(e),t&=t;return t},Math.minMax=function(t,e,n){return(e=isNaN(e)?parseFloat(e):e)<t?t:e>n?n:e},Math.getRange=function(t,e){if(e.constructor!==Array)return t>=e?1:0;if(1===e.length)return t>=e[0]?1:0;if(t<e[0])return 0;for(var n=1;n<e.length&&!(t>=e[n-1]&&t<e[n]);n++);return n},Array.prototype.hasOwnProperty("pushAll")||(Array.prototype.pushAll=function(t){if(this instanceof Array)if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.push(t[e]);else this.push(t);return this});var encodeJ=[];encodeJ[33]="%21",encodeJ[35]="%23",encodeJ[36]="%24",encodeJ[38]="%26",encodeJ[39]="%27",encodeJ[40]="%28",encodeJ[41]="%29",encodeJ[43]="%2B",encodeJ[44]="%2C",encodeJ[59]="%3B",encodeJ[60]="%3C",encodeJ[61]="%3D",encodeJ[62]="%3E",encodeJ[63]="%3F",encodeJ[64]="%40",encodeJ[123]="%7B",encodeJ[124]="%7C",encodeJ[125]="%7D";var UNDEF="undefined",LOCAL="file:"===document.location.protocol,ONEDAY_S=86400,ONEDAY_MS=864e5,isEmpty=function(t){return null==t||0===Object.getOwnPropertyNames(t).length},paramize=function(t){if("number"==typeof t)return""+t;if("string"==typeof t)return t;if("object"==typeof t){for(var e="",n=Object.getOwnPropertyNames(t),r=n.length,o=0;o<r;o++)null!==t[n[o]]&&(e+="&"+n[o]+"="+encodeURIComponent(t[n[o]]));if(e.length)return e.substring(1)}return""},allTrue=function(t){if(t&&t.constructor===Array){for(var e=0;e<t.length;++e)if(!t[e])return!1;return!0}return!0===t},removeEmpty=function(t){if(t&&t.constructor===Array){var e,n=new Array;for(e=0;e<t.length;e++)"string"==typeof t[e]&&t[e].length&&n.push(t[e]);return n}return t},getCoords=function(t){return t.touches?1==t.touches.length?{x:t.touches[0].clientX,y:t.touches[0].clientY}:t.changedTouches&&1==t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:null:{x:t.clientX,y:t.clientY}},translate=function(t,e){if(t=t.trim(),"undefined"!=typeof Texts&&Texts.hasOwnProperty(t))return Texts[t];if(void 0!==e)return DEBUG&&console&&console.log("Using default translation: "+t+"="+e),e;DEBUG&&console&&console.log("Missing translation: "+t);var n=t.replace(/([A-Z])/g," $1").toLowerCase();return n[0]=n.charAt(0).toUpperCase(),n},getKeys=function(t,e){var n,r={},o=t.split(","),i=o.length;for(n=0;n<i;n++)r[o[n]]=translate(o[n],e[o]);return r},getTranslations=function(t){var e,n={};for(e in t)"object"==typeof t[e]?n[e]=getTranslations(t[e]):n[e]=translate(e,t[e]);return n},readData=function(t,e){var n={};if(t&&t.length&&e){e=e.split(",");for(var r,o=0;o<e.length;o++)null!=(r=t.data(e[o]))&&(n[e[o]]=r)}return n},getRelativeDate=function(t){if(!t)return translate("today");if(1===t)return translate("yesterday");var e,n;return t>=730?(e=translate("yearsAgo"),n=Math.round(t/365)):t>=60?(e=translate("monthsAgo"),n=Math.round(t/30.5)):(e=translate("daysAgo"),n=t),e.replace("{0}",n)},getTimespan=function(t){if(!t)return translate("inThePast24Hours");if(t<2)return translate("inThePast48Hours");var e,n;return t>=730?(e=translate("inThePastNYears"),n=Math.round(t/365)):t>=60?(e=translate("inThePastNMonths"),n=Math.round(t/30.42)):(e=translate("inThePastNDays"),n=t),e.replace("{0}",n)},getRelativePath=function(t,e){if(typeof e===UNDEF||!e.length||typeof t===UNDEF||!t.length)return"";if(e.endsWith("/")||(e+="/"),"/"===t)return e;if(t.endsWith("/")||(t+="/"),t===e)return"";var n="../../../../../../../../../../../../../../../../../../../../",r=t.split("/");if("/"===e)return n.substring(0,3*r.length);for(var o=e.split("/");r.length&&o.length&&r[0]===o[0];)r.shift(),o.shift();return n.substring(0,3*(r.length-1))+o.join("/")},encodeAsJava=function(t){var e="";for(t=/^(https?:|file:)?\/\//i.test(t)?encodeURI(t):encodeURIComponent(t),i=0;i<t.length;i++)e+=encodeJ[t.charCodeAt(i)]||t.charAt(i);return e},extend=function(){if(arguments.length<2)return arguments[0]||{};for(var t=arguments[0],e=1;e<arguments.length;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n]);return t},passDefaults=function(t,e,n){if(t&&e)if(void 0!==n){n=n.split(",");for(var r=0;r<n.length;r++)t.hasOwnProperty(n[r])&&(e[n[r]]=t[n[r]])}else for(var o in t)e[o]=t[o]},readUserPrefs=function(t,e){if(void 0!==e&&t){e=e.split(",");for(var n,r=0;r<e.length;r++)null!==(n=$.cookie(e[r]))&&(t[e[r]]=n)}},addParam=function(t,e,n){if(HISTORY){var r=window.location.hash;r&&("#"===r.charAt(0)&&(r=r.substring(1)),e=extend(history.state||r.objectify(),e)),(r="#"+paramize(e))!==window.location.hash&&history.pushState(e,void 0===n?"":n,r.length>1?r:t||"index.html")}},setParam=function(t,e,n){if(HISTORY){var r="#"+paramize(e);r!==window.location.hash&&history.pushState(e,void 0===n?"":n,r.length>1?r:t||"index.html")}},removeParam=function(t,e,n){if(HISTORY){var r,o=window.location.hash;o&&(void 0===e?(o="",history.pushState("","",t||"index.html")):("#"===o.charAt(0)&&(o=o.substring(1)),(r=history.state||o.objectify()).hasOwnProperty(e)&&(delete r[e],o="#"+paramize(r)),history.pushState(r,void 0===n?"":n,o.length>1?o:t||"index.html")))}},removeSearch=function(t){HISTORY&&history.replaceState(history.state,void 0===t?"":t,window.location.href.replace(window.location.search,""))},readParam=function(){if(HISTORY){if(history.state)return history.state;var t=window.location.hash;return"#"===t.charAt(0)&&(t=t.substring(1)),t.objectify()}return null},printImage=function(t,e,n){if(t){var r=window.open("about:blank","print","location=no,status=no,titlebar=no");r.document.open(),r.document.write('<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8">\n<title>'+(e||"Print")+'</title>\n<script>printOut=function(){window.print();window.close();}<\/script>\n<style>body{margin:0;padding:0;text-align:center;overflow:hidden;}\nimg{display:block;width:100%;height:auto;vertical-align:top;}</style>\n</head>\n<body onLoad="setTimeout(printOut,100)"><img src="'+t+'">'+(n||"")+"</body>\n</html>"),r.document.close()}},xDecrypt=function(t){var e,n,r,o=[147,163,87,254,153,4,198,23],i=t.length,a=5*Math.ceil(i/8),s=new Array(a),c="",l=0;for(e=0;e<a;e++)s[e]=0;for(e=0;e<i;e++)(r=t.charCodeAt(e)-48)>9&&(r-=7),r<<=11-l%8,(n=l>>3)<a&&(s[n]|=r>>8,++n<a&&(s[n]|=255&r)),l+=5;for(e=0;e<a;e++)s[e]^=o[e%8];for(a=s[0]|s[1]<<8,r=0,e=4;e<a;e++)c+=String.fromCharCode(s[e]),r+=s[e];return r!=(255&s[2]|s[3]<<8)&&(c=""),c},getStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,"").getPropertyValue(n.unCamelCase()):t.currentStyle?e.currentStyle[n]:null},scrollbarWidth=function(){var t=document.createElement("div");t.style.cssText="width:100px;height:100px;overflow:scroll !important;position:absolute;top:-9999px",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},isTouchEnabled=function(){return/Trident/.test(navigator.userAgent)?void 0!==navigator.maxTouchPoints&&navigator.maxTouchPoints:/Edge/.test(navigator.userAgent)?0==scrollbarWidth():/(Chrome|CriOS)/.test(navigator.userAgent)?/Mobile/.test(navigator.userAgent)||"ontouchstart"in window:"ontouchstart"in window},getTouch=function(){return/Trident|Edge/.test(navigator.userAgent)?window.navigator.pointerEnabled?{START:"pointerdown",MOVE:"pointermove",END:"pointerup",CANCEL:"pointercancel"}:{START:"MSPointerDown",MOVE:"MSPointerMove",END:"MSPointerUp",CANCEL:"MSPointerCancel"}:{START:"touchstart",MOVE:"touchmove",END:"touchend",CANCEL:"touchcancel"}},hasLocalStorage=function(){try{return localStorage.setItem("_t","undefined"),localStorage.removeItem("_t"),!0}catch(t){return!1}},hasHistory=function(){var t=navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},hasPDFViewer=function(){return navigator.mimeTypes["application/pdf"]||function(){var t=function(t){try{return new ActiveXObject(t)}catch(t){}};return t("AcroPDF.PDF")||t("PDF.PdfCtrl")}()||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},getVendor=function(){var t=navigator.userAgent;return t.indexOf("Trident")>0||t.indexOf("Edge")>0?"ms":t.indexOf("AppleWebKit")>0?"webkit":t.indexOf("Gecko")>0?"moz":t.indexOf("Presto")>0?"o":t.indexOf("Blink")>0?"webkit":""},loadGoogleAnalytics=function(t,e,n){if(!LOCAL){var r=xDecrypt(t);if("classic"===e){var o=o||[];o.push(["_setAccount",r]),o.push(["_trackPageview"]),function(t){var e=t.createElement("script");e.async=!0,e.src=("https:"===t.location.protocol?"https://ssl":"http://www")+(n?".stats.g.doubleclick.net/dc.js":".google-analytics.com/ga.js");var r=t.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}(document)}else"universal"===e?(!function(t,e,n,r,o,i,a){t.GoogleAnalyticsObject=o,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,i=e.createElement(n),a=e.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(i,a)}(window,document,"script",0,"ga"),ga("create",r,"auto"),n&&ga("require","displayfeatures"),ga("send","pageview")):gtag("config",r,{send_page_view:!0})}},loadGoogleAPI=function(t,e){if(!LOCAL){!function(t,e,n,r,o,i,a){(i=e.createElement(n)).appendChild(e.createTextNode("{parsetags:'explicit',lang:'${lang}'}")),a=e.getElementsByTagName(n)[0],i.async=1,i.src=r,a.parentNode.insertBefore(i,a)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//apis.google.com/js/platform.js");var n=30,r=function(){"undefined"==typeof gapi?n--?setTimeout(r,200):"console"in window&&console.log("Google Plus API failed to load!"):setTimeout(function(){gapi[e].go()},200)};t&&r()}},loadFacebookAPI=function(t,e){LOCAL||(window.fbAsyncInit=function(){typeof jQuery!==UNDEF&&jQuery(".social-links").trigger("updateLinks")},function(n,r,o){var i,a=n.getElementsByTagName(r)[0];n.getElementById(o)||((i=n.createElement(r)).id=o,i.src="https://connect.facebook.net/"+(e||"en_US")+"/sdk.js#xfbml=1&version=v3.0&appId="+xDecrypt(t),a.parentNode.insertBefore(i,a))}(document,"script","facebook-jssdk"))},loadDisqusAPI=function(t){LOCAL||function(e,n){(n=e.createElement(n)).async=1,n.src="https://"+xDecrypt(t)+".disqus.com/embed.js",n.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(n)}(document,"script")},loadPinterestAPI=function(){LOCAL||function(t,e){(e=t.createElement(e)).async=1,e.src="https://assets.pinterest.com/js/pinit.js",(t.head||t.body).appendChild(e)}(document,"script")},loadAPIs=function(t,e){if(t&&!isEmpty(t))for(var n in t)if(typeof e===UNDEF||e[n])switch(n){case"googleAnalytics":loadGoogleAnalytics(t[n][0],t[n][1],t[n][2]);break;case"googlePlus":loadGoogleAPI(t[n][0],t[n][1]);break;case"facebook":loadFacebookAPI(t[n][0]);break;case"disqus":loadDisqusAPI(t[n][0]);break;case"pinterest":loadPinterestAPI()}},askTrackingConsent=function(t,e){if(e&&!isEmpty(e)||t.cookiePolicy){t=$.extend({},{stay:15},t),e=e||{};var n=getTranslations({cookiePolicyText:"This album is using cookies to remember your preferences. It does not track you, neither it stores personal data.",cookiePolicyLearnMore:"Learn more",cookiePolicyAgree:"Got it",gdprComplianceText:"This site is using the following external services that might track your visits anonymously. Disabling tracking will stop their functionality.",allowAll:"Allow all",denyAll:"Deny all",allowSelected:"Allow selected"}),r=$.cookie("trackingConsent"),o=!1,i=!1,a="icon-checkbox-checked",s="icon-checkbox-unchecked",c=function(t){var e=$(t.target),n=e.hasClass(a);e.toggleClass(a,!n).toggleClass(s,n),l()},l=function(){var t=$("#trackingConsent span."+a).length>0;$("#allow,#deny").toggle(!t),$("#allowsel").toggle(t)},u=function(t){var n,r=$("#trackingConsent span");return n=$.extend({},$.cookie("trackingConsent"),{cookie:1}),"allow"===this.id?r.each(function(){$(this).removeClass(s).addClass(a),n[$(this).attr("id")]=1}):"deny"===this.id?r.each(function(){$(this).removeClass(a).addClass(s),n[$(this).attr("id")]=0}):"allowsel"===this.id&&r.each(function(t){n[$(this).attr("id")]=$(this).hasClass(a)}),$.cookie("trackingConsent",n,31622400),d(),loadAPIs(e,n),!1},d=function(){$("#cookiepolicy").fadeOut(500,function(){$(this).remove()})};if(r?(o=!function(){for(var t in e)if(!r.hasOwnProperty(t))return!1;return!0}(),i=t.cookiePolicy&&!r.hasOwnProperty("cookie")):o=i=!0,o||loadAPIs(e,r),o||i){var p,g=$("<div>",{id:"cookiepolicy"}).appendTo($("body"));if(g.append($("<a>",{class:"close",html:"&times;"}).on("click",d)),i&&(p=$("<p>",{id:"cookiePolicy",html:n.cookiePolicyText}).appendTo(g),o||(p.append($("<a>",{id:"agree",class:"btn",text:n.cookiePolicyAgree}).on("click",u)),t.cookiePolicyUrl&&p.append(" ").append($("<a>",{text:n.cookiePolicyLearnMore,target:"_blank",href:t.cookiePolicyUrl})))),o){p=$("<p>",{id:"trackingConsent",html:n.gdprComplianceText}).appendTo(g);for(var f in e)p.append($("<span>",{id:f,class:r&&r[f]?a:s,html:"&nbsp;"+f.capitalize()}).on("click",c));p.append($("<a>",{id:"allow",class:"btn",text:n.allowAll}).on("click",u)),p.append($("<a>",{id:"deny",class:"btn",text:n.denyAll}).on("click",u)),p.append($("<a>",{id:"allowsel",class:"btn",text:n.allowSelected}).on("click",u)),l(),t.cookiePolicyUrl&&p.append(" ").append($("<a>",{text:n.cookiePolicyLearnMore,target:"_blank",href:t.cookiePolicyUrl}))}g.fadeIn(500),setTimeout(function(){$("#cookiepolicy").fadeOut(500,function(){$(this).remove()})},1e3*t.stay)}}},NOLINK="javascript:void(0)",LOCALSTORAGE=hasLocalStorage(),HISTORY=hasHistory(),VEND=getVendor(),BACKFACEBUG=navigator.userAgent.indexOf("Edge")>0&&parseInt(navigator.userAgent.match(/Edge\/(\d+\.\d+)/)[1])<=16,FITCONTENT=/Trident/.test(navigator.userAgent)||/Edge/.test(navigator.userAgent)?(document.getElementsByTagName("html")[0].classList.add("no-fitcontent"),!1):(document.getElementsByTagName("html")[0].classList.add("fitcontent"),!0),ISIOSDEVICE=navigator.userAgent.match(/ipad|iphone|ipod/i),TOUCH=getTouch(),TOUCHENABLED=isTouchEnabled(),HIDPI=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches;HASPDFVIEWER=hasPDFViewer(),addClass(document.getElementsByTagName("html")[0],(TOUCHENABLED?"":"no-")+"touch"),addClass(document.getElementsByTagName("html")[0],(HIDPI?"":"no-")+"hidpi");var log=function(){},DEBUG=void 0!==DEBUG&&DEBUG;!function(t,e){"use strict";var n,r,o=!1,i=1;log=function(e){var a=function(e){if(t.isArray(e)){for(var n="",r=0;r<e.length;r++)n+=a(e[r])+", ";return"[ "+n.substring(0,n.length-2)+" ]"}if("object"==typeof e){n="";for(var r in e)n+=r+": "+a(e[r])+",<br>";return"{ "+n+" }"}return isNaN(e)?e:parseInt(e)===e?e:e.toFixed(4)};DEBUG&&!o&&(n||(n=t('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:0.75em;z-index:999999"></div>').hover(function(){o=!0},function(){o=!1}).appendTo("body")),e===r?n.children().first().empty().html(r+" <sup>("+ ++i+")</sup>"):(t('<div style="height:3em;overflow:auto;">'+a(e)+"</div>").prependTo(n),r=e,i=1))},t.fn.logEvents=function(e){if(DEBUG){var n=e||"mousedown mouseup mouseover mouseout mousewheel wheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";return this.each(function(){t(this).on(n,function(t){return void 0===t?log("Undefined event"):t.target?"log"!==t.target.id&&log(t.type+' <span style="padding:0 4px;font-size:0.75em;background-color:#000;border-radius:4px;"><b>'+(t.target.nodeName?t.target.nodeName.toLowerCase():"???")+"</b>"+(t.target.id?":"+t.target.id:"")+"</span>"+(t.relatedTarget?' <span style="padding:0 4px;font-size:0.6em;background-color:#800;border-radius:4px;"><b>'+t.relatedTarget.nodeName.toLowerCase()+"</b>"+(t.relatedTarget.id?":"+t.relatedTarget.id:"")+"</span>":"")):log("No event target!"),!0})})}},t.fn.logCss=function(e,n,r){if(DEBUG){r=r||20,n=n||2e3;var o=new Date;return this.each(function(){var i=t(this),a=function(t){var e=new Date-o;log(e+"&nbsp;::&nbsp;"+t+" = "+i.css(t)),e>n&&clearInterval(s)},s=setInterval(function(){if(t.isArray(e))for(var n=0;n<e.length;n++)a(e[n]);else a(e)},r)})}},void 0===t.fn.deserialize&&(t.fn.deserialize=function(e){if(!e)return this;var n=t(this),r=e.replace(/\+/g,"%20").split("&");return t.each(r,function(t,e){var r=e.split("="),o=decodeURIComponent(r[0]),i=decodeURIComponent(r[1]),a=n.find("[name="+o+"]");if("radio"===a[0].type||"checkbox"===a[0].type){var s=a.filter('[value="'+i+'"]'),c=s.length;c||"on"!==i?s.prop("checked",c):a.eq(0).prop("checked",!0)}else a.val(i)}),this}),void 0===t.when.all&&(t.when.all=function(e){var n=new t.Deferred;return t.when.apply(t,e).then(function(){n.resolve(Array.prototype.slice.call(arguments))},function(){n.fail(Array.prototype.slice.call(arguments))}),n}),t.fn.waitAllImg=function(e,n,r){if(this.length){var o=t(this),i=[];return function(e){return(e=e.filter('img[src!=""]')).each(function(){i.push(function(e){var n=new t.Deferred,r=new Image;return r.onload=function(){n.resolve(e)},r.onerror=function(){n.reject(new Error("Image not found: "+e.src))},r.src=e.src,n}(this))}),t.when.all(i)}(o).then(function(e){t.isFunction(n)&&n.call(e)},function(e){t.isFunction(r)&&r.call(e)}).then(function(){t.isFunction(e)&&e.call(o)}),this}e.call(o)};var a=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};t.fn.fullScreen=function(t){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&(void 0===t?a():void(t?function(t){a()||(t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&document.body.msRequestFullscreen())}(this[0]):a()&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())))}}(jQuery);
var J={ALBUM:"album",FOLDERS:"folders",NAME:"name",PATH:"path",THUMB:"thumb",IMAGE:"image",WIDTH:"width",HEIGHT:"height",ORIGINAL:"original",FOLDERS:"folders",OBJECTS:"objects",FILEDATE:"fileDate",COMMENT:"comment",TITLE:"title",COUNTERS:"counters",DEEPCOUNTERS:"deepCounters",FILESIZE:"fileSize",CATEGORY:"category",KEYWORDS:"keywords",CAMERA:"camera",VIDEO:"video",LEVEL:"level",PATHREF:"pathRef",PARENTREF:"parentRef",RELPATH:"relPath",FOLDERTITLE:"folderTitle",IMAGECAPTION:"imageCaption",THUMBCAPTION:"thumbCaption",PHOTODATA:"photodata",LOCATION:"location",REGIONS:"regions",SHOP:"shop",EXTERNAL:"external",PROJECTIONTYPE:"projectionType",DATES:"dates",ADDED:"added",TAKENDATE:"takenDate",MODIFIEDDATE:"modifiedDate",DATERANGE:"dateRange",MOSTPHOTOS:"mostphotos",SOUNDCLIP:"soundClip",OBJ:"obj",LOADCOUNTER:"loadcounter",TOTAL:"total",INDEX:"index"},Album=function(e,t){var n,r,o,a,l,s={treeFile:"tree.json",dataFile:"data1.json",deepDataFile:"deep-data.json",indexName:"index.html",folderImageFile:"folderimage.jpg",folderImageDims:[1200,800],folderThumbFile:"folderthumb.jpg",folderThumbDims:[600,420],thumbDims:[240,180],slidesDir:"slides",hiresDir:"hi-res",rootPath:"",audioPoster:"audio.png",videoPoster:"video.png",relPath:"",loadDeep:!0,lazy:!0,possibleTypes:["folder","webPage","webLocation","image","video","audio","other"]},u=getTranslations({and:"and"}),f={},c=[],h=[],E=function(e){if("video"===e[J.CATEGORY]){var t=e[J.VIDEO][J.PATH];return decodeURIComponent(t.substring(t.lastIndexOf("/")+1))}return e.hasOwnProperty(J.ORIGINAL)?decodeURIComponent(e[J.ORIGINAL][J.PATH].replace(s.hiresDir+"/","")):e[J.NAME]},O=function(e){return e.hasOwnProperty(J.CATEGORY)&&-1!=="image.video.audio.other".indexOf(e[J.CATEGORY])},d=function(t){if(!t)return 0;"/"===t.slice(-1)&&"../"!==t.slice(-3)&&(t=t.substring(0,t.length-1));var n=e.inArray(t,c);return n>=0?n+1:c.push(t)},p=function(e){return e?c[e-1]:""},g=function(t){return t?(t--,!e.isNumeric(t)||t<0||t>c.length?(console.log("Error: out of bounds path reference ("+t+")!"),null):P(c[t])):f},T=function(e,t){if(e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)if(e[J.FOLDERS][n][J.PATH]===t)return e[J.FOLDERS][n];return null},P=function(e){for(var t,n=f,r=e.split("/"),o=0,a=r.length;o<a;o++){if(!(t=T(n,r[o])))return null;n=t}return o===a?n:null},A=function(e){if(typeof e===UNDEF&&(e=r),e===f)return null;var t;return(t=g(e.hasOwnProperty(J.PARENTREF)?e[J.PARENTREF]:e[J.PATHREF]))===e?null:t},D=function(t,n){var r={};do{t.hasOwnProperty(n)&&(r=e.extend({},t[n],r))}while(t=A(t));return r},R=function(e,t){if(t)for(var n in e)n===J.OBJECTS||n===J.ALBUM||t.hasOwnProperty(n)||(t[n]=e[n])},y=function(e,t,n){if(e.hasOwnProperty(J.OBJECTS)){t[J.OBJECTS]=[];for(var r,o=0,a=0,i=e[J.OBJECTS].length;o<i;o++)r=e[J.OBJECTS][o],f[J.LOADCOUNTER][r[J.CATEGORY]]++,f[J.LOADCOUNTER][J.TOTAL]++,"folder"===r[J.CATEGORY]?(t[J.FOLDERS]||(t[J.FOLDERS]=[]),R(r,t[J.FOLDERS][a]),n&&y(r,t[J.FOLDERS][a],!0),(r={})[J.INDEX]=a,a++):(r[J.PATHREF]=t[J.PATHREF],r[J.RELPATH]=t[J.RELPATH]),t[J.OBJECTS].push(r)}},m=function(t,n){if(t){if(t.hasOwnProperty(J.OBJECTS))return e.isFunction(n)&&n.call(this,t),!0;var r=p(t[J.RELPATH]);h||(h=[]),h.push(e.getJSON((r?r+"/":"")+s.dataFile+(s.makeDate?"?"+s.makeDate:"")).done(function(r){R(r,t),y(r,t),e.isFunction(n)&&n.call(this,t)}).fail(function(){console.log('Error loading folder data: "'+(r?r+"/":"")+s.dataFile+'".'),e.isFunction(n)&&n.call(this,t)}))}},L=function(e,t){if(m(e),t&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)L(e[J.FOLDERS][n])},F=function(e){return typeof e===UNDEF&&(e=r),e===f?0:e.hasOwnProperty(J.LEVEL)?e[J.LEVEL]:F(A(e))},w=function(e,t,n){return n?function(e,t){if(t.indexOf(".")>=0){if("album"===(t=t.split("."))[0])return S(t[1]);do{if(e.hasOwnProperty(t[0]))return e[t[0]][t[1]]}while(e=A(e));return null}do{if(e.hasOwnProperty(t))return e[t]}while(e=A(e));return null}(e,t):t.indexOf(".")>0?(t=t.split("."),e.hasOwnProperty(t[0])?e[t[0]][t[1]]:null):e[t]},S=function(e){return f.hasOwnProperty(e)?f[e]:null},v=function(t){var n=e("<div>").css({position:"fixed",width:"80%",maxWidth:"600px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"1em",backgroundColor:"#a00",color:"#e8e8e8"}).append(e("<h5>",{text:"Error"}).css({color:"#f63"})).append(e("<p>",{html:t}).css({marginBottom:0})).appendTo(e("body"));n.find("a").css({color:"#fff",textDecoration:"underline"}),setTimeout(function(){n.fadeOut(function(){n.remove()})},6e3)};return t&&(DEBUG&&console.log("new Album("+JSON.stringify(t)+");"),function(t){if(n)return n;n=new Date,typeof t!==UNDEF&&e.extend(s,t),a=l=!1,"."===s.rootPath&&(s.rootPath="");(function(t){e.getJSON((s.rootPath?s.rootPath+"/":"")+s.treeFile+(s.makeDate?"?"+s.makeDate:"")).done(function(n){(f=n)[J.LOADCOUNTER]={},f[J.LOADCOUNTER][J.TOTAL]=0;for(var o=0;o<s.possibleTypes.length;o++)f[J.LOADCOUNTER][s.possibleTypes[o]]=0;null===(r=function(e){return e?("/"===e.slice(-1)&&(e=e.slice(0,-1)),P(e)):f}(s.relPath))&&(console.log("Error: can't find folder \""+s.relPath+'" in the database!'),v((location.protocol,'Check if you\'ve allowed jAlbum to process the subdirectories and "Make album" again!'))),function(){var e=function(t,n,o){t[J.LEVEL]=n,t.hasOwnProperty(J.CATEGORY)||(t[J.CATEGORY]="folder"),o=o.length&&"/"!==o.slice(-1)?o+"/":o;var a=n?t[J.PATH]:"";t[J.PATHREF]=d(o+a),t[J.PARENTREF]=n?d(o):null;var i;if(i=s.relPath.length?t===r?"":0===o.indexOf(a+"/")?a.substring(s.relPath.length):s.rootPath+"/"+(o+a):o+a,t[J.RELPATH]=d(i),t.hasOwnProperty(J.FOLDERS)){pr=d(o);for(var l=0,u=t[J.FOLDERS].length;l<u;l++)e(t[J.FOLDERS][l],n+1,o+a)}};e(f,0,"")}(),e.isFunction(t)&&t.call(this)}).fail(function(){console.log('Fatal error! Missing or access denied to "'+s.treeFile+'".'),v("file:"===location.protocol?'Local access to the album\'s database file is blocked by your browser. This will not affect the uploaded album! Use jAlbum\'s built-in browser or FireFox for testing, or <a href="https://jalbum.net/forum/ann.jspa?annID=172" target="_blank">read here</a> how to test albums in other browsers!':"The album's main database file is missing or broken! If you're the owner <a href=\"https://jalbum.net/forum/ann.jspa?annID=177\">read how you can fix this</a>."),e.isFunction(t)&&t.call(this)})})(function(){h=[],L(s.lazy?r:f,!s.lazy),e.when.apply(e,h).done(function(){var t=new Date;DEBUG&&console.log(h.length+" folder(s) loaded: "+(t-n)+"ms"),a=!0,h=null,o=r&&r.hasOwnProperty(J.OBJECTS)?0:null,e.isFunction(s.ready)&&s.ready.call(this),s.loadDeep&&f.hasOwnProperty(J.FOLDERS)?function(){var t=new Date,n=(s.rootPath?s.rootPath+"/":"")+s.deepDataFile+(s.makeDate?"?"+s.makeDate:"");e.getJSON(n).done(function(n){y(n,f,!0),l=!0,DEBUG&&console.log("Deep data loaded: "+(new Date-t)+"ms total: "+f[J.LOADCOUNTER][J.TOTAL]+" objects"),e.isFunction(s.deepReady)&&s.deepReady.call(this)}).fail(function(){l=!1,DEBUG&&console.log('Error loading deep data: "'+n+'".'),e.isFunction(s.deepReady)&&s.deepReady.call(this)})}():e.isFunction(s.deepReady)&&s.deepReady.call(this)})})}(t)),{isReady:function(){return a},collectTags:function(t){var t=e.extend({fields:"creator,keywords,folder:title,webLocation:title",types:"all",depth:"current",exact:"creator,keywords,name"},t),n=[],o=e.isArray(t.fields)?t.fields:t.fields.split(/,\s?/),a=o.length,i="name"===t.sort,l="all"===t.types,u={},c={},E=function(e){for(var t=0,r=!1,o=(e=e.split("^")).length;t<o;t++)if(!(e[t].length<3)){tag=e[t].toUpperCase(),r=!1;for(var a=0,i=n.length;a<i;a++)if(tag===n[a][2]){n[a][1]++,r=!0;break}r||n.push([e[t],1,tag])}},O=function(t,n){for(var r,i="^",l="^",s=function(e,t){if(e){var n,r;c[t]?r=[e.toString()]:("comment"===t&&(e=e.stripHTML()),r=e.split(/\W+/),r=removeEmpty(r));for(var o=0,a=r.length;o<a;o++)(n=r[o].trim()).length<=2||-1===l.indexOf("^"+n.toUpperCase()+"^")&&(i+=n+"^",l+=n.toUpperCase()+"^")}},u=0;u<a;u++){if(o[u].length>1){if(o[u][0]!==n)continue;r=o[u][1]}else r=o[u][0];if(t.hasOwnProperty(r)&&t[r])if(e.isArray(t[r]))for(var f=0;f<t[r].length;f++)s(t[r][f],r);else s(t[r],r)}i.length>1&&E(i)},d=function(e){if(e&&((l||u.folder)&&O(e,"folder"),e.hasOwnProperty(J.OBJECTS)))for(var t,n=0,r=e[J.OBJECTS];n<r.length;n++)r[n].hasOwnProperty(J.CATEGORY)&&(t=r[n][J.CATEGORY],(l||u[t])&&O(r[n],t))},p=function(e){if(m(e,d),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)p(e[J.FOLDERS][n])},g=function(){t.sort&&n.sort(function(e,t){return i?(""+e[2]).localeCompare(""+t[2]):t[1]-e[1]}),t.max&&t.max<n.length&&(n=n.slice(0,t.max))};h=[];for(var T,P=0;P<a;P++)o[P]=o[P].split(":"),T=o[P][1]||o[P][0],c[T]="string"==typeof t.exact?t.exact.indexOf(T)>=0:t.exact;if(!l)for(var P=0,A=s.types.split(/,\s?/);P<A.length;P++)u[A[P]]=!0;p("tree"===t.depth?f:r),e.isFunction(t.ready)&&(h.length?e.when.apply(e,h).done(function(){g(),t.ready.call(n,t)}):(g(),t.ready.call(n,t)))},collectItems:function(t){if(typeof t!==UNDEF&&t.hasOwnProperty("terms")){var n,o,a=[],i=(t=e.extend({fields:"creator,keywords,title,comment,name",types:"all",depth:"current",exact:!1},t)).fields.split(/,\s?/),l=i.length,c=new Array(l),E=!1,O="all"===t.types,d={},p=function(t,r){for(var s,u=0,f=0;f<l;f++){if(i[f].length>1){if(i[f][0]!==r)continue;s=i[f][1]}else s=i[f][0];t.hasOwnProperty(s)&&(e.isArray(t[s])?t[s].join(" "):t[s]+"").searchTerm(n,c[s],E)&&u++}(E&&u===o||u)&&a.push(t)},g=function(e){if(e&&(e!==f&&(O||d.folder)&&p(e,"folder"),e.hasOwnProperty(J.OBJECTS)))for(var t=0,n=e[J.OBJECTS];t<n.length;t++)n[t].hasOwnProperty(J.CATEGORY)&&(cat=n[t][J.CATEGORY],(O||d[cat])&&p(n[t],cat))},T=function(e){if(m(e,g),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)T(e[J.FOLDERS][n])},P=function(){t.max&&t.max<a.length&&(a=a.slice(0,t.max))};'"'===t.terms[0]&&'"'===t.terms[t.terms.length-1]?(n=t.terms.substring(1,t.terms.length-1),!1===t.exact&&(t.exact=!0)):!1===t.exact?~(n=t.terms.replace(/\s+/g,",")).indexOf(","+u.and+",")&&(n=n.replace(new RegExp(","+u.and+",","gi"),","),E=!0):n=t.terms.trim(),n=t.exact?[n]:removeEmpty(n.split(/,\s?/)),o=n.length;for(var A,D=0;D<l;D++)i[D]=i[D].split(":"),A=i[D][1]||i[D][0],c[A]="string"==typeof t.exact?t.exact.indexOf(A)>=0:t.exact;if(!O)if("-"===s.types.charAt(0))for(D=0;D<s.possibleTypes.length;D++)-1===s.types.indexOf(s.possibleTypes[D])&&(d[s.possibleTypes[D]]=!0);else for(var D=0,R=s.types.split(/,\s?/);D<R.length;D++)d[R[D]]=!0;h=[],T("tree"===t.depth?f:r),e.isFunction(t.ready)&&(h.length?e.when.apply(e,h).done(function(){P(),t.ready.call(a,t)}):(P(),t.ready.call(a,t)))}},collectByDate:function(t){if(typeof t!==UNDEF&&t.hasOwnProperty("range")&&t.hasOwnProperty("ready")){var n,o,a=[],i=function(e){if(e&&e.hasOwnProperty(J.OBJECTS))for(var r,i,l=e[J.OBJECTS],s=0;s<l.length;s++)!(r=l[s]).hasOwnProperty(J.INDEX)&&O(r)&&(i=r[J.DATES])&&(i=i[t.reference])&&i>=n&&i<=o&&a.push(r)},l=function(e){if(m(e,i),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)l(e[J.FOLDERS][n])},s=function(){if(t.sort){var e,n;a.sort(function(r,o){return e=r[J.DATES][t.reference],n=o[J.DATES][t.reference],t.reverse?n-e:e-n})}t.max&&t.max<a.length&&(a=a.slice(0,t.max))};(t=e.extend({sort:!0,reverse:!1,reference:"dateTaken",depth:"current"},t)).end?(o=t.end*ONEDAY_S,n=(t.end-t.range)*ONEDAY_S):(n=o=Math.round(new Date/1e3),t.hasOwnProperty("start")?(n-=t.start*ONEDAY_S,o=n+t.range*ONEDAY_S):n-=t.range*ONEDAY_S),h=[],l("tree"===t.depth?f:r),e.isFunction(t.ready)&&(h.length?e.when.apply(e,h).done(function(){s(),t.ready.call(a,t)}):(s(),t.ready.call(a,t)))}},getTree:function(){return f},getPaths:function(){return c},isImage:function(e){return e.hasOwnProperty(J.CATEGORY)&&"image"===e[J.CATEGORY]},isAudio:function(e){return e.hasOwnProperty(J.CATEGORY)&&"audio"===e[J.CATEGORY]},isVideo:function(e){return e.hasOwnProperty(J.CATEGORY)&&"video"===e[J.CATEGORY]},isLightboxable:O,isCurrentFolder:function(e){return 0===e[J.RELPATH]},getLevel:F,getTitle:function(e){return typeof e===UNDEF&&(e=r),e[J.TITLE]||""},getName:function(e){return typeof e===UNDEF&&(e=r),e[J.NAME]||""},getExtension:function(e){return E(e).getExt()},getComment:function(e){return typeof e===UNDEF&&(e=r),e[J.COMMENT]||""},getMakeDate:function(){return new Date(f[J.FILEDATE])},getAlbumTitle:function(){return f[J.TITLE]||f[J.NAME]},getCurrentFolder:function(){return r},getObjects:function(){return r.hasOwnProperty(J.OBJECTS)?r[J.OBJECTS]:[]},getImages:function(){var e=[];if(r&&r.hasOwnProperty(J.OBJECTS)){var t=r[J.OBJECTS];if(t)for(var n=0,o=t.length;n<o;n++)!t[n].hasOwnProperty(J.INDEX)&&O(t[n])&&e.push(t[n])}return e},getFolders:function(){var e=[];if(r)if(r.hasOwnProperty(J.FOLDERIDX))for(var t=0,n=r[J.FOLDERIDX].length;t<n;t++)e.push(r[J.OBJECTS][r[J.FOLDERIDX][t]]);else r.hasOwnProperty(J.FOLDERS)&&(e=r[J.FOLDERS]);return e},getFolderPath:function(e){return p(e[J.PATHREF]||0)},getRelativeFolderPath:function(e){return p(e[J.RELPATH]||0)},getParent:A,getItem:function(t,n){var r,o=function(e,t){if(e.hasOwnProperty(J.OBJECTS))for(var n=e[J.OBJECTS],o=0,a=n.length;o<a;o++)if(n[o][J.NAME]===t)return void(r=n[o])};if(!t)return f;if(t.endsWith("/"))return P(t);var a=t.lastIndexOf("/"),i=P(t.substring(0,a)),l=t.substring(a+1);return i&&(i.hasOwnProperty(J.OBJECTS)?(o(i,l),n.call(r)):(h=[],m(i,o),e.isFunction(n)&&(h.length?e.when.apply(e,h).done(function(){n.call(r)}):n.call(r)))),null},getRootPath:function(e){return p(e[J.PATHREF])+"/"+e[J.NAME]},getItemName:E,getItemPath:function(e){var t=p(e[J.RELPATH]),n=e[J.CATEGORY]||"folder";return t=t.length&&"/"!==t.slice(-1)?t+"/":t,"folder"===n?t:"video"===n?t+e[J.VIDEO][J.PATH]:"audio"===n||"other"===n||e.hasOwnProperty(J.ORIGINAL)?t+e[J.ORIGINAL][J.PATH]:"image"===n?t+e[J.IMAGE][J.PATH]:"webPage"===n?t+e[J.NAME]:e[J.PATH]},getOptimalImage:function(e,t){var n=p(e[J.RELPATH]),r=e[J.CATEGORY]||"folder";return n=n.length&&"/"!==n.slice(-1)?n+"/":n,"folder"===r?n+(t[0]>s.folderThumbDims[0]||t[1]>s.folderThumbDims[1])?s.folderImageFile:s.folderThumbFile:n+(t[0]>s.thumbDims[0]||t[1]>s.thumbDims[1])?e[J.IMAGE][J.PATH]:e[J.THUMB][J.PATH]},getOriginalPath:function(e){if(e.hasOwnProperty(J.ORIGINAL)){var t=p(e[J.RELPATH]);return(t=t.length?t+"/":"")+e[J.ORIGINAL][J.PATH]}return null},getUrl:function(e){var t=p((e=e||r)[J.RELPATH]);return t=(t.length?t+"/":"")+s.indexName,O(e[i])&&(t+="#img="+encodeAsJave(e[J.NAME])),t},getThumbPath:function(e){var t=p(e[J.RELPATH]),n=e[J.THUMB][J.PATH];return function(e){return e.hasOwnProperty(J.LEVEL)}(e)&&(n=n.replace(e[J.PATH]+"/","")),(t.length?t+"/":"")+n},getImagePath:function(e){var t=p(e[J.RELPATH]);return(t=t.length?t+"/":"")+e[J.IMAGE][J.PATH]},getThemeImagePath:function(e){var t=p(e[J.RELPATH]);return(t=t.length?t+"/":"")+s.folderImageFile},getPosterPath:function(e){var t=p(e[J.RELPATH]),n=e[J.CATEGORY]||"folder";return t=t.length?t+"/":"","audio"!==n&&"video"!==n||e[J.IMAGE][J.PATH].startsWith(s.slidesDir+"/")?t+e[J.IMAGE][J.PATH]:(s.rootPath.length?s.rootPath+"/":"")+"res/"+s[n+"Poster"]},getSourcePath:function(e){var t=p(e[J.RELPATH]);return(t.length?t+"/":"")+(e.hasOwnProperty(J.ORIGINAL)?e[J.ORIGINAL][J.PATH]:e[J.IMAGE][J.PATH])},getAbsolutePath:function(e){var t=p(e[J.RELPATH]);return(t.length?t.fullUrl():window.location.href.getDir())+(window.location.href.getFile()||s.indexName)+(e.hasOwnProperty(J.LEVEL)?"":"#img="+encodeURIComponent(E(e)))},getAbsoluteImagePath:function(e){var t=p(e[J.RELPATH]);return(t.length?t.fullUrl():window.location.href.getDir())+e[J.IMAGE][J.PATH]},getPreviousFoldersLastImage:function(t){var n,o=function(e){typeof e===UNDEF&&(e=r);var t=A(e);if(t){var n;if(t.hasOwnProperty(J.FOLDERIDX)){if((n=t[J.FOLDERIDX].findIndex(function(n){return t[J.OBJECTS][n]===e}))>0)return t[J.OBJECTS][t[J.FOLDERIDX][n+1]]}else if(t.hasOwnProperty(J.FOLDERS)&&(n=t[J.FOLDERS].findIndex(function(t){return t===e}))>0)return t[J.FOLDERS][n+1]}return null}();return o&&(o.hasOwnProperty(J.OBJECTS)?(getFirstImage(),t.call(n)):(h=[],m(o,function(e){if(e.hasOwnProperty(J.OBJECTS))for(var t=e[J.OBJECTS],r=t.length-1;r>=0;r--)if(O(t[r]))return void(n=t[r])}),e.isFunction(t)&&(h.length?e.when.apply(e,h).done(function(){t.call(n)}):t.call(n)))),null},getNextFoldersFirstImage:function(t){var n,o=function(e){typeof e===UNDEF&&(e=r);var t=A(e);if(t){var n;if(t.hasOwnProperty(J.FOLDERIDX)){if((n=t[J.FOLDERIDX].findIndex(function(n){return t[J.OBJECTS][n]===e}))<t[J.FOLDERIDX].length)return t[J.OBJECTS][t[J.FOLDERIDX][n+1]]}else if(t.hasOwnProperty(J.FOLDERS)&&(n=t[J.FOLDERS].findIndex(function(t){return t===e}))<t[J.FOLDERS].length)return t[J.FOLDERS][n+1]}return null}(),a=function(e){if(e.hasOwnProperty(J.OBJECTS))for(var t=e[J.OBJECTS],r=0,o=t.length;r<o;r++)if(O(t[r]))return void(n=t[r])};return o&&(o.hasOwnProperty(J.OBJECTS)?(a(),t.call(n)):(h=[],m(o,a),e.isFunction(t)&&(h.length?e.when.apply(e,h).done(function(){t.call(n)}):t.call(n)))),null},getProperty:w,getPropertyObject:function(e,t,n){return n?D(e,t):e.hasOwnProperty(t)?e[t]:null},hasShop:function(e){var t=D(e||f,J.SHOP);return t&&"-"!==t.options},getRootProperty:S,processTemplate:function(e,t){var n,o,t=t||r;if(e&&e.indexOf("${")>0)for(;n=e.match(/\$\{([\w\.]+)\}/);)n[1]&&(o=w(t,n[1],!0)||""),e=e.substring(0,n.index)+o+e.substring(n.index+n[0].length);return e}}};
!function(e){"use strict";var t=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(e){return!1}}();e.cookie=function(e,r,n){var o=function(e){return!!/^(true|yes)$/.test(e)||!/^(false|no)$/.test(e)&&(/^([\d.]+)$/.test(e)?parseFloat(e):e)},i=function(e){if("string"!=typeof e)return e;if("["===e[0]||"{"===e[0]){e=JSON.parse(e);for(var t in e)"string"==typeof t[e]&&(t[e]=o(t[e]));return e}return o(e)};if(arguments.length>1){a=new Date;return null===r?t?localStorage.removeItem(e):document.cookie=encodeURIComponent(e)+"=; expires="+a.toGMTString()+"; path=/":(r="object"==typeof r?JSON.stringify(r):String(r),a.setTime(a.getTime()+1e3*("number"!=typeof n?3600:n)),t?localStorage.setItem(e,r+"; @"+String(a.getTime())):document.cookie=encodeURIComponent(e)+"="+r+"; expires="+a.toGMTString()+"; path=/"),r}if(e)if(t){if(l=localStorage.getItem(e)){if(1===(l=l.split("; @")).length&&(l=l[0].split("; ")),!(l.length>1))return i(l);var a;if((a=new Date).getTime()<parseInt(l[1],10))return i(l[0]);localStorage.removeItem(e)}}else{var l,s=document.cookie.split(/;\s*/);e+="=";for(var u=0;u<s.length;u++)if(s[u].substring(0,e.length)===e)return i(s[u].substring(e.length))}return null}}(jQuery);
!function(t,e,o){"use strict";t.fn.thumbScroll=function(s){return s=t.extend({},t.fn.thumbScroll.defaults,s),this.each(function(){var i,n,l,a,r,c,u,h,d,f,p=t(this),g="_lts_"+Math.floor(1e4*Math.random()),m=t.extend({},s,JSON.parse(p.data("thumbscroll")||"{}")),C=p.find("."+m.clipClass),b=C.find("."+m.thumbContClass),w=p.closest(".cont").hasClass("thumbs-left")||p.closest(".cont").hasClass("thumbs-right"),v=!1,T=function(t){return t.preventDefault(),!1},M=function(t){t=typeof t!==UNDEF?t:w?b.position().top:b.position().left,i.toggleClass("disabled",t>-1),n.toggleClass("disabled",t<(w?C.height()-b.height()+1:C.width()-b.width()+1))},y=function(){b.css(w?{top:b.position().top,transition:"top 0ms linear"}:{left:b.position().left,transition:"left 0ms linear"})},x=function(e){var o,s;w?(o=C.height(),s=b.height()):(o=C.width(),s=b.width()),o&&s&&!(o>=s)&&t.isNumeric(e)&&(e=Math.minMax(o-s,e,0),p.addClass(m.scrollingClass),b.css(w?{top:e,transition:"top "+m.speed+"ms ease-out"}:{left:e,transition:"left "+m.speed+"ms ease-out"}).one("transitionend",function(){p.removeClass(m.scrollingClass),p.trigger("lazyloadThumbs",e)}),M(e))},k=function(t){return S(),x(w?b.position().left+C.width():b.position().top+C.height()),!1},E=function(t){return S(),x(w?b.position().top-C.height():b.position().left-C.width()),!1},S=function(t){"number"==typeof d&&clearTimeout(d),d=void 0!==t?t:setTimeout(function(){d=!1},m.seekStay)},D=function(e,o){if(!p.hasClass(m.scrollingClass)&&!d){if((e=o?t(o):b.find(m.activeClass)).length){var s,i,n,l,a,r;if(w?(s=e.position().top,i=e.outerHeight(!0),n=Math.round(i*m.headRoom),l=b.position().top,a=b.height(),r=C.height()):(s=e.position().left,i=e.outerWidth(!0),n=Math.round(i*m.headRoom),l=b.position().left,a=b.width(),r=C.width()),r>=a)return;if(s>r-i-n-l)l=Math.max(r-i-n-s,r-a);else{if(!(s<-l+n))return;l=-s+n}x(l)}}},O=function(t,e){return t.preventDefault(),e&&(y(),S(),x(w?b.position().top+C.height()*(e<0?-1:1):b.position().left+C.width()*(e<0?-1:1))),!1},H=function(t){if(a){var e=getCoords(t.originalEvent)[w?"y":"x"]-a;e&&b.css(w?"top":"left",Math.minMax(h,l+e,0))}else a=getCoords(t.originalEvent)[w?"y":"x"],p.addClass(m.scrollingClass);return!1},U=function(o){o.preventDefault(),c=b.position()[w?"top":"left"];var s=getCoords(o.originalEvent)[w?"y":"x"]-a,i=(new Date).getTime()-r;return"mouseup"===o.type?e.off("mousemove."+g+" mouseup."+g):b.off(TOUCH.MOVE+"."+g+" "+TOUCH.END+"."+g),S(),Math.abs(s)<10?(p.removeClass(m.scrollingClass),t(o.target).off("click."+g),t(o.target).closest("a").trigger("click",o)):(!function(t){t=Math.minMax(h,c+t,0),M(t),b.css(w?{top:t,transition:"top "+m.extraSpeed+"ms ease-out"}:{left:t,transition:"left "+m.extraSpeed+"ms ease-out"}).one("transitionend",function(){p.removeClass(m.scrollingClass)}),p.trigger("lazyloadThumbs",t)}(1e3*s/i),setTimeout(function(){p.removeClass(m.scrollingClass),t(o.target).off("click."+g)},30)),!1},N=function(o){return"mousedown"===o.type&&1!==o.which||(o.preventDefault(),!("touchstart"!==o.type||!(!o.originalEvent.touches||o.originalEvent.touches.length>1||p.hasClass(m.scrollingClass)))||(p.addClass(m.scrollingClass),y(),l=b.position()[w?"top":"left"],a=getCoords(o.originalEvent)[w?"y":"x"],r=(new Date).getTime(),u=0,(h=w?C.height()-b.height():C.width()-b.width())>=0||("mousedown"===o.type?(e.on("mousemove."+g,H).on("mouseup."+g,U),t(o.target).on("click."+g,T)):(t(o.target).closest("a").focus(),b.on(TOUCH.MOVE+"."+g,H).on(TOUCH.END+"."+g,U)),!1)))},z=function(){p.addClass(m.fillClass);var t,e,o;w?(t=b.position().top,e=b.height(),o=C.height()):(t=b.position().left,e=b.width(),o=C.width()),e>o?(v||(i.on("click."+g,k),n.on("click."+g,E),b.on(TOUCH.START+"."+g+" mousedown."+g,N),b.add(i).add(n).on("selectstart."+g,T),m.enableMouseWheel&&C.on("mousewheel."+g+" DOMMouseScroll."+g,O),v=!0),o-e>t&&(y(),b.css(w?{top:o-e,transition:"top 0ms linear"}:{left:o-e,transition:"left 0ms linear"})),M()):(p.removeClass(m.fillClass),i.add(n).add(b).add(C).off("."+g),v=!1,x(0))};C.length&&b.length&&((i=p.find("."+m.backClass)).length||(i=t("<button>",{class:m.backClass+" icon-arrow-"+(w?"up":"left")+" "+m.disabledClass}).appendTo(p)),(n=p.find("."+m.forwardClass)).length||(n=t("<button>",{class:m.forwardClass+" icon-arrow-"+(w?"down":"right")+" "+m.disabledClass}).appendTo(p)),o.on("resize."+g,function(){clearTimeout(f),f=setTimeout(z,100)}),p.on("scrollToActive",D),p.trigger("lazyloadThumbs",0),z())})},t.fn.thumbScroll.defaults={activeClass:"active",disabledClass:"disabled",backClass:"scroll-back",forwardClass:"scroll-forward",clipClass:"clip",thumbContClass:"thumb-cont",scrollingClass:"scrolling",fillClass:"fill",thumbsPosition:"top",speed:1e3,extraSpeed:600,seekStay:3e3,headRoom:1.75,enableMouseWheel:!0}}(jQuery,$(document),$(window));
!function(t){"use strict";t.fn.renderShares=function(e){e=t.extend({},t.fn.renderShares.defaults,e);var a=t(this),i=getTranslations({share:"Share",shareOn:"Share on",checkThisOut:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"}),n=encodeURIComponent(e.callAction||i.checkThisOut),r=(e.label||i.share,function(i,r){if((r=typeof r!==UNDEF?t.extend({},e,r):e).hasOwnProperty("href")||(r.href=window.location.href),r.hasOwnProperty("description")?r.description=r.description.stripHTML():r.description=t("meta[name=description]").attr("content")||"",r.hasOwnProperty("title")?r.title=r.title.stripHTML():r.title=t("meta[name=title]").attr("content")||t("title").text()||"",!r.hasOwnProperty("image")){var s=t("link[rel=image_src]");r.image=s.length?s.attr("href"):window.location.href.getDir()+"folderthumb.jpg"}r.image.startsWith("http")||(r.image=window.location.href.getDir()+r.image);var o,l=encodeURIComponent(r.href),c=encodeURIComponent(r.title),d=encodeURIComponent(r.description),p=encodeURIComponent(r.image);a.find("."+e.className+" a").each(function(){var e=t(this);switch(e.data("share")){case"facebook":if(r.href.indexOf("#")>0)return;if(typeof FB!==UNDEF)return void e.off(".share").on("click.share",function(){return FB.ui({method:"feed",link:r.href,caption:r.title,description:r.description,picture:r.image}),!1});o="https://www.facebook.com/sharer.php?s=100&p%5Burl%5D="+r.href+"&p%5Bimages%5D%5B0%5D="+r.image+"&p%5Btitle%5D="+c;break;case"twitter":o="https://twitter.com/home?status="+c+": "+l;break;case"tumblr":o="https://www.tumblr.com/share/link?url="+l+"&name="+c;break;case"pinterest":o="https://pinterest.com/pin/create/button/?url="+l+"&media="+p+"&description="+c;break;case"linkedin":o="https://www.linkedin.com/shareArticle?mini=true&url="+l+"&title="+c+"&summary="+d;break;case"digg":o="https://digg.com/submit?url="+r.href;break;case"stumbleupon":o="https://www.stumbleupon.com/submit?url="+r.href+"&title="+c;break;case"reddit":o="https://www.reddit.com/submit?url="+r.href;break;case"email":e.attr({href:"mailto:?subject="+n+"&body="+c+"%0D%0A"+d+"%0D%0A"+encodeURI(r.href)});default:return}e.attr({href:o,target:"_blank"})})});return function(n){for(var s,n=t("<div>",{class:e.className}).appendTo(a),o=e.sites.split(","),l=0;l<o.length;l++)s=o[l],"facebook,twitter,tumblr,pinterest,linkedin,digg,stumbleupon,reddit,email".indexOf(s)>=0&&n.append(t("<a>",{class:e.buttonClassName+" icon-"+s.unCamelCase(),title:i.shareOn+" "+s.capitalize(),text:" "+(e.buttonLabels?s.capitalize():"")}).data("share",s));r(),n.children("a").addTooltip({pos:[0,1,2,1]})}(),e.hasOwnProperty("buttons")&&!LOCAL&&function(){for(var i=e.buttons.split(","),n=encodeURIComponent(window.location.href.split("#")[0]),r=encodeURIComponent(e.title||t("meta[name=title]").attr("content")||t("title").text()),s=e.image?window.location.href.getDir()+encodeURIComponent(e.image):t("link[rel=image_src]").attr("href"),o=t("<div>",{class:e.buttonsClassName}).appendTo(a),l=0;l<i.length;l++)switch(i[l]){case"facebook":o.append('<div class="likebtn fb-like" data-href="'+n+'" data-layout="button_count" data-action="like" data-size="large" data-show-faces="false" data-share="false"></div>');break;case"twitter":o.append('<a class="likebtn twitter-share-button icon-twitter" href="https://twitter.com/intent/tweet?text='+r+"&url="+n+'" data-size="large" target="_blank"> Tweet</a>');break;case"pinterest":o.append('<div class="likebtn"><a data-pin-do="buttonPin" data-pin-count="beside" data-pin-tall="true" data-pin-save="true" href="https://www.pinterest.com/pin/create/button/?url='+n+"&media="+s+"&description="+r+'" data-pin-do="buttonPin"></a></div>')}}(),a.closest(".modal").length&&a.find("."+e.className+" a").on("click",function(){return t(this).closest(".modal").trigger("close"),!0}),a.on("updateLinks",r),this},t.fn.renderShares.defaults={buttonLabels:!0,className:"shares",buttonsClassName:"buttons",buttonClassName:"btn",sites:"facebook,twitter,tumblr"}}(jQuery);
!function(t,o,i,n){"use strict";var e,s,a=function(){var t=(i.body||i.documentElement).style;if(void 0!==t.webkitTransition)e="-webkit-",s="webkitTransitionEnd";else if(void 0!==t.MozTransition)e="-moz-",s="transitionend";else if(void 0!==t.OTransition)e="-o-",s="oTransitionEnd";else{if(void 0===t.transition)return!1;e="",s="transitionend"}return!0}(),r={left:0,top:0,center:.5,middle:.5,right:1,bottom:1};t.fn.translateX=function(o,i,n){var r={};if(typeof o===UNDEF){var f=t(this).eq(0);return a?f.position().left-parseFloat(f.css("left")):f.position().left-f.data("leftPos")||0}return a&&(r[e+"transform"]="translateX("+o+"px)",r[e+"transition"]=e+"transform"+(i?" "+i+"ms ease-out":"")),this.each(function(){var e=t(this);if(a)"function"==typeof n&&e.one(s,n),e.css(r);else{var f=e.data("leftPos");void 0===f&&e.data("leftPos",f=e.position().left),r.left=f+o,i?e.animate(r,i,n):("function"==typeof n&&setTimeout(function(){n.call(e[0])},50),e.css(r))}})},t.fn.translate=function(o,i,n){var r={};if(typeof o===UNDEF){var f=t(this).eq(0);return a?[f.position().left-parseFloat(f.css("left")),f.position().top-parseFloat(f.css("top"))]:[f.position().left-f.data("leftPos")||0,f.position().top-f.data("topPos")||0]}return a&&(r[e+"transform"]="translate("+o[0]+"px,"+o[1]+"px)",r[e+"transition"]=e+"transform"+(i?" "+i+"ms ease-out":"")),this.each(function(){var e=t(this);if(a)"function"==typeof n&&e.one(s,n),e.css(r);else{var f=e.data("leftPos");top=e.data("topPos"),void 0===f&&e.data("leftPos",f=e.position().left),void 0===top&&e.data("topPos",top=e.position().top),r.left=f+o[0],r.top=top+o[1],i?e.animate(r,i,n):("function"==typeof n&&setTimeout(function(){n.call(e[0])},50),e.css(r))}})},t.fn.translateXAndFade=function(o,i,n,r){var f={opacity:i};return a&&(f[e+"transform"]="translateX("+o+"px)",f[e+"transition-property"]=e+"transform, opacity",f[e+"transition-duration"]=n+"ms",f[e+"transition-timing-function"]="ease-out"),this.each(function(){var i=t(this);if(a)"function"==typeof r&&i.one(s,r),i.css(f);else{var e=i.data("leftPos");void 0===e&&i.data("leftPos",e=i.position().left),f.left=e+o,n?i.animate(f,n,r):(i.css(f),"function"==typeof r&&setTimeout(function(){r.call(i[0])},50))}})},t.fn.translateAndFade=function(o,i,n,r){var f={opacity:i};return a&&(f[e+"transform"]="translate("+o[0]+"px,"+o[1]+"px)",f[e+"transition-property"]=e+"transform, opacity",f[e+"transition-duration"]=n+"ms",f[e+"transition-timing-function"]="ease-out"),this.each(function(){var i=t(this);if(a)"function"==typeof r&&i.one(s,r),i.css(f);else{var e=i.data("leftPos"),c=i.data("topPos");void 0===e&&i.data("leftPos",e=i.position().left),void 0===c&&i.data("topPos",c=i.position().top),f.left=e+o[0],f.top=c+o[1],n?i.animate(f,n,r):(i.css(f),"function"==typeof r&&setTimeout(function(){r.call(i[0])},50))}})},t.fn.opacity=function(o,i,n,r,f){var c=t(this);if(void 0===o||"boolean"==typeof o)return c.css("opacity");var p=!1,l={},u=function(){p||(p=!0,t.isFunction(f)&&f.call(c[0]))};return t.isFunction(i)?(f=i,n="ease-out",i=void 0):t.isFunction(n)?(f=n,n="ease-out"):t.isFunction(r)&&(f=r,r=!1),"boolean"==typeof n&&(r=n,n="ease-out"),"boolean"==typeof i&&(r=i,i=void 0),c.css("opacity")===o?(t.isFunction(f)&&setTimeout(function(){f.call(c[0])},50),this):(l.opacity=o,a&&!r?i?(l[e+"transition"]="opacity "+i+"ms "+n,c.one(s,u),setTimeout(u,i+50),c.css(l)):(l[e+"transition"]="none",c.css(l),t.isFunction(f)&&setTimeout(function(){f.call(c[0])},50)):i?c.animate(l,i,u):(c.css(l),t.isFunction(f)&&setTimeout(function(){f.call(c[0])},50)),this)},t.fn.transform=function(o,i,n,f,c){var p=t(this).eq(0),l=p.data("transform")||{origo:[0,0],position:[0,0],origin:[.5,.5],baseSize:[p.width(),p.height()],baseScale:[1,1],scale:[1,1],rotate:0};if("object"!=typeof o)return l;arguments.length>1?("function"==typeof i?(c=i,n="ease-out",i=void 0):"function"==typeof n?(c=n,n="ease-out"):"function"==typeof f&&(c=f,f=!1),"boolean"==typeof n&&(f=n,n="ease-out"),"boolean"==typeof i&&(f=i,i=void 0)):n="ease-out";var u,d=!1,m={},y=function(){setTimeout(function(){d||(d=!0,"function"==typeof c&&c.call(p[0]))},20)};if(void 0!==o.opacity&&(m.opacity=o.opacity),o.origo){if(!a||f){var g=p.data("originalPosition");g||(g=[p.position().left,p.position().top],p.data("originalPosition",g)),o.origo[0]+=g[0],o.origo[1]+=g[1]}}else o.origo=l.origo;return o.baseScale?"number"==typeof o.baseScale&&(o.baseScale=[o.baseScale,o.baseScale]):o.baseScale=l.baseScale,o.baseSize?o.scale||o.size||(o.scale=[1,1]):o.baseSize=l.baseSize,o.position?(void 0===o.position[0]&&(o.position[0]=l.position[0]),void 0===o.position[1]&&(o.position[1]=l.position[1])):o.position=l.position,o.origin?("string"==typeof o.origin[0]&&(o.origin[0]=r[o.origin[0]]),"string"==typeof o.origin[1]&&(o.origin[1]=r[o.origin[1]])):o.origin=l.origin,o.scale?"number"==typeof o.scale&&(o.scale=[o.scale,o.scale]):o.size?o.scale=[o.size[0]/o.baseSize[0],o.size[1]/o.baseSize[1]]:o.scale=l.scale,u=[o.scale[0]*o.baseScale[0],o.scale[1]*o.baseScale[1]],p.data("transform",o),a&&!f?(o.origin[0]===l.origin[0]&&o.origin[1]===l.origin[1]||(m[e+"transform-origin"]=100*o.origin[0]+"% "+100*o.origin[1]+"%"),m[e+"transform"]="translate("+(o.origo[0]+o.position[0])+"px,"+(o.origo[1]+o.position[1])+"px)"+(1===u[0]&&1===u[1]?"":" scale("+u[0]+","+u[1]+")")+(o.rotate?" rotate("+o.rotate+"deg)":""),i?(m[e+"transition-property"]=e+"transform"+(void 0!==o.opacity?", opacity":""),m[e+"transition-duration"]=i+"ms",n&&(m[e+"transition-timing-function"]=n),"function"==typeof c&&(p.one(s,y),setTimeout(y,i+50)),p.css(m)):(m[e+"transition"]="none",p.css(m),"function"==typeof c&&setTimeout(function(){c.call(p[0])},50))):(m.left=o.origo[0]+o.position[0],m.top=o.origo[1]+o.position[1],void 0!==o.size?(m.width=o.size[0],m.height=o.size[1]):(m.width=o.baseSize[0]*u[0],m.height=o.baseSize[1]*u[1],m.left-=(m.width-o.baseSize[0])*o.origin[0],m.top-=(m.height-o.baseSize[1])*o.origin[1]),i?p.animate(m,i,c):(p.css(m),"function"==typeof c&&setTimeout(function(){c.call(p[0])},50))),this}}(jQuery,window,document);
!function(e,t,n,o){"use strict";e.fn.swipe=function(o){o=e.extend({onSwipedLeft:!1,onSwipedRight:!1,onSmallSwipe:!1,onSwipeStart:!1,onClick:!1,onFinished:!1,treshold:20,swipeoutSpeed:300,overTreshold:.25},o);var a=function(e){return[e.outerWidth(),e.outerHeight()]},i=function(e){return e.touches&&1===e.touches.length?[Math.round(e.touches[0].pageX),Math.round(e.touches[0].pageY)]:null!==e.clientX?[Math.round(e.pageX),Math.round(e.pageY)]:null},r=function(e){return e.touches&&1===e.touches.length?Math.round(e.touches[0].pageX):null!==e.pageX?Math.round(e.pageX):null};return this.each(function(){var u,s,l,d,p,c,h,f=e(this),g=f.parent(),w=f.data("lsw_ns")||"lsw_"+Math.floor(1e4*Math.random()),m=!0,S=null,v=f.hasClass("audio")||f.hasClass("video"),T=function(e){return!!(e.originalEvent.touches&&e.originalEvent.touches.length>1)||(e.preventDefault(),m?(c=r(e.originalEvent)-p,f.translateX(h+c)):((c=i(e.originalEvent))[0]-=p[0],c[1]-=p[1],f.translate([h[0]+c[0],h[1]+c[1]])),!1)},y=function(t){if(f.data("swipeEnded"))return!0;t.preventDefault(),f.data("swipeEnded",!0);var a=(new Date).getTime()-d,i=1+o.swipeoutSpeed/a,r=function(){"function"==typeof o.onFinished&&o.onFinished.call(f[0],t)},l=function(){c&&"function"==typeof o.onSmallSwipe&&o.onSmallSwipe.call(f[0],t),"function"==typeof o.onClick&&o.onClick.call(f[0],t)},p=function(e){e?"function"==typeof o.onSwipedRight&&o.onSwipedRight.call(f[0],t):"function"==typeof o.onSwipedLeft&&o.onSwipedLeft.call(f[0],t)};if("mouseup"===t.type||"mouseout"===t.type?(n.off("mousemove."+w),f.off("mouseup."+w+" mouseout."+w)):"pointerup"===t.type&&f.off("pointermove."+w+" pointerup."+w),f.data("taplength",a),m)if(Math.abs(c)>o.treshold){v=h+c*i;s[0]>=u[0]||c>0&&v-u[0]/2>s[0]*(o.overTreshold-.5)||v+u[0]/2<s[0]*(.5-o.overTreshold)?(f.data("scrolling",!1),f.translateXAndFade(v,0,o.swipeoutSpeed),S=setTimeout(r,o.swipeoutSpeed+20),p(c>0)):f.translateX(v,o.swipeoutSpeed)}else c&&f.translateX(0,100),l();else if(function(t){return e.isArray(t)?Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)):Math.abs(t)}(c)>o.treshold){var g=parseInt(f.css("top")),v=[h[0]+c[0]*i,c[1]>0?Math.min(-g,h[1]+c[1]*i):Math.max(-g+s[1]-u[1],h[1]+c[1]*i)];c[0]>0&&v[0]-u[0]/2>s[0]*(o.overTreshold-.5)||v[0]+u[0]/2<s[0]*(.5-o.overTreshold)?(f.data("scrolling",!1),f.translateAndFade(v,0,o.swipeoutSpeed),S=setTimeout(r,o.swipeoutSpeed+20),p(c[0]>=0)):f.translate(v,o.swipeoutSpeed)}else(c[0]||c[1])&&f.translate([0,0],100),l();return!1};f.add(n).off("."+w),f.data("lsw_ns",w),t.on("resize."+w,function(){clearTimeout(l),l=setTimeout(function(){s=a(g)},50)}),f.attr("draggable","false").on(TOUCH.START+"."+w+" dragstart."+w+" mousedown."+w,function(t){return!(f.data("scrolling")||!(t.originalEvent.touches&&t.originalEvent.touches.length>1||"mousedown"===t.type&&1!==t.which)&&"BUTTON"!==t.target.nodeName&&"A"!==t.target.nodeName&&(!v||!("AUDIO"===t.target.nodeName||"VIDEO"===t.target.nodeName&&t.target.controls&&t.offsetY>e(t.target).height()-60))&&("function"==typeof o.onSwipeStart&&o.onSwipeStart.call(f[0],t),"touchstart"!==t.type&&t.preventDefault(),f.stop(!0,!1),f.data("scrolling",!1),f.data("swipeEnded",!1),f.data("taplength",0),d=(new Date).getTime(),s=s||a(g),u=u||a(f),(m=s[1]>=u[1])?(p=r(t.originalEvent),c=0,h=f.translateX()):(p=i(t.originalEvent),c=[0,0],h=f.translate()),"mousedown"===t.type&&(n.on("mousemove."+w,T),f.on("mouseup."+w+" mouseout."+w,y)),"touchstart"!==t.type))}).on(TOUCH.MOVE+"."+w+" drag."+w,T).on(TOUCH.END+"."+w,y).on("removeSwipe."+w,function(){setTimeout(function(){f.data("scrolling",!1)},20),f.removeAttr("draggable"),f.add(n).off("."+w)}).on("selectstart."+w,function(e){return e.preventDefault(),!1})})}}(jQuery,jQuery(window),jQuery(document));
!function(n,e,t,o){"use strict";n.fn.addMap=function(e){e=n.extend({},n.fn.addMap.defaults,e);var o=function(n){var e,t;return"string"==typeof n?(n=n.split(","),e=parseFloat(n[0]),t=n.length>1?parseFloat(n[1]):0):(e=n[0]||n.lat||0,t=n[1]||n.lng||0),{lat:e,lng:t}};return n(this).each(function(){var a=n(this);if(typeof a.data("map-ns")===UNDEF){var r,l=n.extend({},e,readData(a,"location,type,zoom,label,markers,current")),s=[],i=-1,p=function(e,t){return!(s&&s.length&&(n.isNumeric(t)||(t=function(n){for(var e=0;e<s.length;e++)if(s[e].link===n)return e;return-1}(t)),t>=0&&t<s.length))||(s[t].setAnimation(google.maps.Animation.BOUNCE),i=t,!1)},c=function(){s&&s.length&&i>=0&&(null!==s[i].getAnimation()&&s[i].setAnimation(null),i=-1)},g=function(){n.isFunction(l.onMarkerClick)&&l.onMarkerClick.call(this)},d=function(e){if("undefined"!=typeof google&&google.maps)n.isFunction(e)&&e.call(null);else{var o=t.createElement("script");o.type="text/javascript",o.src=l.apiUrl+"?key="+(l.apiKey||""),n.isFunction(e)&&(o.onload=function(){setTimeout(e,40)}),t.body.appendChild(o)}l.hasOwnProperty("onReady")&&l.onReady.call(this)},u=function(e,t){if(!a.data("rendered")){var i=l.markers.length,d=0,u=Math.minMax(10,Math.round(1e3/i),100),m=function(){d<i&&(l.markers[d].hasOwnProperty("latLng")&&(s[d]=new google.maps.Marker({map:r,position:l.markers[d].latLng,animation:google.maps.Animation.DROP}),l.markers[d].hasOwnProperty("title")&&s[d].setTitle(l.markers[d].title),l.markers[d].hasOwnProperty("link")&&(s[d].link=l.markers[d].link,google.maps.event.addListener(s[d],"click",g))),d++,setTimeout(m,u))};if(function(n){for(var e=0;e<n.length;e++)n[e].hasOwnProperty("pos")&&!n[e].hasOwnProperty("latLng")&&(n[e].latLng=o(n[e].pos))}(l.markers),l.markers&&l.markers.length>1){var h=function(n){for(var e,t=-180,o=-90,a=90,r=180,l=0;l<n.length;l++)(e=n[l].latLng)&&(r>e.lng&&(r=e.lng),a>e.lat&&(a=e.lat),t<e.lng&&(t=e.lng),o<e.lat&&(o=e.lat));return t<r&&(t=180,r=-180),o<a&&(o=90,a=-90),{east:t,west:r,north:o,south:a}}(l.markers);r=new google.maps.Map(a[0],{center:{lat:(h.north+h.south)/2,lng:(h.east+h.west)/2},zoom:l.zoom,mapTypeId:l.type,fullscreenControl:l.fullscreenControl,scrollwheel:!1,panControl:!1,controlSize:32}),s=[],m(),!l.fitBounds||h.east===h.west&&h.north===h.south||google.maps.event.addListenerOnce(r,"idle",function(){r.fitBounds(h)})}else{var f=l.hasOwnProperty("location")?o(l.location):l.markers[0].latLng;r=new google.maps.Map(a[0],{center:f,zoom:l.zoom,mapTypeId:l.type,fullscreenControl:l.fullscreenControl,scrollwheel:!1,panControl:!1,controlSize:32}),m()}l.hasOwnProperty("onTypeChanged")&&n.isFunction(l.onTypeChanged)&&google.maps.event.addListener(r,"maptypeid_changed",function(){l.onTypeChanged.call(r.getMapTypeId())}),l.hasOwnProperty("onZoomChanged")&&n.isFunction(l.onZoomChanged)&&google.maps.event.addListener(r,"zoom_changed",function(){l.onZoomChanged.call(r.getZoom())}),a.data("rendered",!0),a.on("setActive",p),a.on("resetMarkers",c),n.isFunction(t)&&t.call(null)}};l.autoLoad?d(u):d(),a.on("render",u)}})},n.fn.addMap.defaults={apiUrl:"https://maps.googleapis.com/maps/api/js",zoom:16,fitBounds:!0,type:"roadmap",fullscreenControl:!1,autoLoad:!1}}(jQuery,window,document);
!function(t,e,a,n,o){"use strict";var s=function(t){return t*(1-2*Math.random())};t.fn.projector=function(o,i){if(typeof o===UNDEF)return this;i=t.extend({},t.fn.projector.defaults,i);var r=getTranslations(t.fn.projector.text),c={projector:"projector",prev:"jprev",next:"jnext",jalbum:"jalbum",cards:"jcards",card:"jcard",caption:"jcaption",title:"jtitle",hasCaption:"jhascaption",imageReady:"jimageready",prevPage:"jprevpg",nextPage:"jnextpg",currPage:"jcurrpg",paging:"jpaging",shade:"jshade",threedee:"threedee"};return t(this).each(function(){var l=t(this),d=l.data("projector-ns");if(typeof d===UNDEF){var p,u,h,m,f,g,w,y,v,T=[],x=0,b=1,S=0,A=(t(),!1),C=null,P=!1,k=t(),O=function(){k.length&&(k.translateXAndFade(0,1,2*u.speed),k=t())},M=function(){var t;if(clearTimeout(v),!(S<2))if("random"===u.ordering){do{t=Math.floor(Math.random()*T.length)}while(t===x);H(t)}else I()},F=function(){if(b=-1,x)H(x-1);else if(l.data("base")){switch(u.afterLast){case"donothing":break;case"nextfolder":u.previousFoldersLast&&(window.location.href=u.previousFoldersLast);break;case"backtocover":case"startover":case"onelevelup":case"ask":return void H(T.length-1)}O()}else H(T.length-1)},I=function(){if(b=1,x<T.length-1)H(x+1);else if(l.data("base")){switch(u.afterLast){case"donothing":break;case"startover":return void H(0);case"onelevelup":u.level&&(window.location.href="../"+u.indexName);break;case"nextfolder":u.nextFoldersFirst&&(window.location.href=u.nextFoldersFirst);break;case"backtocover":u.hasOwnProperty("onQuit")&&u.onQuit.call(null,x);break;case"ask":var e=new Array;return O(),T.length>1&&e.push({t:r.startOver,c:"icon-loop",h:function(t){H(0)}}),u.level&&e.push({t:r.upOneLevel,c:"icon-up-one-level",h:function(){window.location.href="../"+u.indexName}}),e.push({t:r.backToCover,c:"icon-arrow-down",h:function(){u.hasOwnProperty("onQuit")&&u.onQuit.call(null,x)}}),u.nextFoldersFirst&&e.push({t:r.nextFolder,c:"icon-arrow-right",h:function(){window.location.href=u.nextFoldersFirst}}),void l.modal(t("<p>",{class:"text-center",text:r.atLastPageQuestion}),e,{onClose:function(){H(T.length-1)},class:"secondary",title:r.atLastPage})}O()}else H(0)},E=function(t){t=t||0;v=clearTimeout(v),u.auto=!0,v=setTimeout(M,u.slideshowDelay+t),u.hasOwnProperty("onSlideshowStart")&&u.onSlideshowStart.call(null,x)},j=function(){v=clearTimeout(v),u.auto=!1,u.hasOwnProperty("onSlideshowPause")&&u.onSlideshowPause.call(null,x)},D=function(){u.auto&&(A=!1,v=setTimeout(M,i.slideshowDelay/4))},L=function(e){var a=0;f.find("."+c.card).each(function(n){var o=t(this);if(typeof e!==UNDEF&&!e&&o.data("fitted"))return a++,!0;var s=o.children("img");if(!s.length)return!0;var i,r=Math.min(o.outerWidth(),f.outerWidth()),c=Math.min(o.outerHeight(),f.outerHeight()),l=s[0].naturalWidth||s.width(),d=s[0].naturalHeight||s.height();if(!(l&&d&&r&&c))return!0;l*=i="cover"===u.fit?Math.max(r/l,c/d):"vertically"===u.fit||r/l>c/d?Math.min(c/d,u.scaleUp?u.maxzoom:1):"both"===u.fit?Math.min(r/l,u.scaleUp?u.maxzoom:1):1,d*=i,s.add(o.find("."+u.regionsClass)).css({left:(r-l)/2,top:(c-d)/2,width:l,height:d}),o.data("fitted",!0),a++}),f.find("."+c.card).length>a&&setTimeout(L,100,e)},N=function(e){A=!0,v=clearTimeout(v);var a;e instanceof t?a=e:e&&(e.preventDefault(),a=t(e.target).closest("."+c.card));var n=a.find("img").eq(0),s=T[a.data("idx")],r=(o.getItemPath(s),t("<"+s[J.CATEGORY]+">",{preload:"auto",controls:"true",controlsList:"nodownload"}).insertAfter(n));return"kenburns"===i.transitionType?r.css({width:"100%",height:"100%"}):r.css(t.extend(n.position(),{width:n.width(),height:n.height()})),r.attr("autoplay",i.videoAuto).on("volumechange."+d,function(){i.volume=this.volume}).one("loadedmetadata",function(){this.play()}).one("ended",D).attr("src",o.getSourcePath(s)),n.hide(),r[0].volume=i.volume,!1},B=function(e){var a=e?(e instanceof jQuery?e:t(e.target)).closest("."+c.card):f.find("#c"+x),n=function(){return[a.outerWidth()||f.width(),a.outerHeight()||f.height()]};t(".map-root").trigger("resetMarkers"),a.addClass(c.imageReady),L();var o=a.prevAll(),r=function(e){var n=new Date,o=e?t(this).closest("."+c.card):a.prevAll(),s=o.data("ts")||o.children("."+c.card).data("ts");o.length&&(isNaN(s)||n-s<.9*u.transitionSpeed?DEBUG&&function(t){console&&t&&DEBUG&&console.log(t)}('Premature remove attempt on "'+o.attr("id")+'"! ('+(n-s)+"ms < "+u.transitionSpeed+"ms) callee = "+(e?"transitionEnd("+e.originalEvent.propertyName+")":"timeout")):o.parent().hasClass(c.prevPage)?o.parent().remove():"coverflow"===u.transitionType?o.not(a.prev()).remove():o.remove())};if((b=function(t,e){return 1===T.length?0:!e&&t>1&&t===T.length-1?1:!t&&e>1&&e===T.length-1?-1:e>t?1:-1}(a.prev().data("idx"),a.data("idx")))>0?f.removeClass("bwd").addClass("fwd"):b<0&&f.removeClass("fwd").addClass("bwd"),"carousel"!==u.transitionType&&("coverflow"===u.transitionType?a.prev().prev().prevAll().remove():a.prev().prevAll().remove(),o=a.prevAll()),o.data("ts",new Date),o.destroyAllTooltips(),function(t){if(t&&t.length){var e=t.children("img");window.getComputedStyle(t[0],null),e.length&&window.getComputedStyle(e[0],null)}}(a),u.hasOwnProperty("onLoadEnd")&&u.onLoadEnd.call(this,x),T.length>1&&(o.trigger("removeSwipe"),a.swipe({onSwipedLeft:function(e){k=t(this),I()},onSwipedRight:function(){k=t(this),F()},onSwipeStart:function(){j()},onClick:function(t){return!u.clickForNext||"BUTTON"===t.target.nodeName||"A"===t.target.nodeName||(M(),!1)}})),(a.hasClass("video")||a.hasClass("audio"))&&i.videoAuto&&N(a),k.length){var l=function(){a.css({opacity:0,transform:"scale(.95) translateX("+100*b+"px)"}),o.one("transitionend",r).css({opacity:0}),window.requestAnimationFrame(d)},d=function(){a.css({opacity:1,transform:"scale(1) translateX(0)",transition:"opacity "+u.transitionSpeed+"ms ease-in-out, transform "+u.transitionSpeed+"ms ease-out"}),setTimeout(r,u.transitionSpeed)};window.requestAnimationFrame(l),k=t()}else switch(u.transitionType){case"crossfade":o.length?(a.css({opacity:0}).css({transition:"opacity "+u.transitionSpeed+"ms ease-in-out"}).css({opacity:1}),o.one("transitionend",r).css({opacity:0}),setTimeout(r,u.transitionSpeed)):a.show().css({opacity:1,transition:"opacity "+u.transitionSpeed+"ms ease-in-out"});break;case"zoom":if(o.length){var l=function(){a.show().css({transform:"scale("+(b>0?.9:1.11)+")",opacity:0}),o.one("transitionend",r).css({opacity:0,transform:"scale("+(b>0?1.11:.9)+")",transition:"transform "+u.transitionSpeed+"ms ease-out, opacity "+u.transitionSpeed+"ms ease-in-out"}),setTimeout(r,u.transitionSpeed),window.requestAnimationFrame(d)},d=function(){a.css({transition:"transform "+u.transitionSpeed+"ms ease-out, opacity "+u.transitionSpeed+"ms ease-in-out"}).css({transform:"scale(1)",opacity:1})};window.requestAnimationFrame(l)}else a.show().css({transform:"scale(1)",opacity:1});break;case"stack":m=n();if(o.length){a.css({opacity:0,transform:"scale(0.92)"}).css({transition:"transform "+u.transitionSpeed+"ms ease-out, opacity "+u.transitionSpeed/2+"ms linear"}).css({transform:"scale(1)",opacity:1});var p=((y=s(60))+90)/180*Math.PI,h=Math.min(m[0],m[1])/4;o.one("transitionend",r).css({opacity:1,transition:"transform "+u.transitionSpeed/2+"ms ease-in, opacity "+u.transitionSpeed/2+"ms ease-in"}).css({opacity:0,transform:"rotate("+(0-y/10)+"deg) translate("+Math.round(h*Math.cos(p))+"px,"+b*Math.round(0-h*Math.sin(p))+"px)"}),setTimeout(r,u.transitionSpeed)}else a.show().css({opacity:1});break;case"kenburns":var m=n(),g=a.children("img").eq(0),w=1.14+s(.2),y=s(1)*Math.PI,h=(Math.random()+.2)*Math.min(m[0],m[1])*.08,C=Math.round(h*Math.cos(y)),P=Math.round(h*Math.sin(y));a.data({sc:w>1.14?w-.2:w+.2,dx:-C,dy:-P}),a.css({transition:"opacity "+u.transitionSpeed+"ms linear"}).css({opacity:1}),g.css({transform:"translate("+C+"px,"+P+"px) scale("+w+")"}),g.show().css({transition:"transform "+u.transitionSpeed+"ms linear"}).css({transform:"scale("+(w>1.14?w-.1:w+.1)+") translate(0,0)"}),o.length&&(g=o.children("img").eq(0),o.css({transition:"opacity "+u.transitionSpeed+"ms linear"}).css({opacity:0}),g.one("transitionend",r).css({transform:"scale("+o.data("sc")+") translate("+o.data("dx")+"px,"+o.data("dy")+"px)"}),setTimeout(r,u.transitionSpeed));break;case"slide":if(o.length){var O=u.direction.length>1?randomDirection():b<0?function(t){switch(u.direction[0].toLowerCase()){case"s":return[0,-1];case"w":return[1,0];case"n":return[0,1];default:return[-1,0]}}():function(){switch(u.direction[0].toLowerCase()){case"s":return[0,1];case"w":return[-1,0];case"n":return[0,-1];default:return[1,0]}}(),m=n();a.css({opacity:.7,transform:"translate("+O[0]*m[0]+"px,"+O[1]*m[1]+"px)"}),a.show().css({opacity:1,transform:"translate(0,0)",transition:"transform "+u.transitionSpeed+"ms ease-in-out, opacity "+u.transitionSpeed+"ms ease-out"}),o.one("transitionend",r).css({opacity:.7,transform:"translate("+(0-O[0]*m[0])+"px,"+(0-O[1]*m[1])+"px)"}),setTimeout(r,u.transitionSpeed)}else a.show().css({opacity:1,transition:"transform "+u.transitionSpeed+"ms ease-in-out, opacity "+u.transitionSpeed+"ms ease-out"});break;case"swap":m=n();o.length?(a.css({zIndex:0,opacity:0,transform:"scale(0.7) translate(0,-40px)",transition:"transform "+u.transitionSpeed/2+"ms ease-in-out, opacity "+u.transitionSpeed/2+"ms linear"}).show().css({opacity:1,transform:"scale(0.85) translate("+b*(m[0]/2)+"px,-40px)"}).one("transitionend",function(){a.css({zIndex:1,transform:"scale(1) translate(0,0)"})}),o.css({zIndex:1,opacity:1,transform:"scale(0.7) translate("+b*(0-.55*m[0])+"px,20px)"}).one("transitionend",function(){o.css({zIndex:0,opacity:0,transform:"scale(0.49) translate(0,40px)"}).one("transitionend",r)}),setTimeout(r,u.transitionSpeed)):a.css({opacity:0,zIndex:1,transform:"scale(0.85)"}).show().css({transition:"transform "+u.transitionSpeed/2+"ms ease-in-out, opacity "+u.transitionSpeed/2+"ms linear"}).css({opacity:1,transform:"scale(1)"});break;case"carousel":var m=n(),y=360/S,h=Math.round(m[0]/(2*Math.tan(Math.PI/S))),p=Math.round(m[0]/(2*Math.sin(Math.PI/S))),E=f.children().index(a);f.data("initialized")?(E=Math.floor((f.data("num")||0)/S)*S+(E||S),f.data("num",E).css({transform:"translateZ(-"+p+"px) rotateY(-"+E*y+"deg)",transition:"transform "+u.transitionSpeed+"ms"}).children().css({opacity:BACKFACEBUG?.9:.6}),a.css({opacity:1})):(f.css({transform:"translateZ(-"+p+"px) rotateY(0)",transition:"transform "+u.transitionSpeed+"ms"}),f.children().each(function(e){t(this).css({opacity:e===E?1:BACKFACEBUG?.9:.6,transform:"rotateY("+e*y+"deg) translateZ("+h+"px)"}).show().css({transition:"opacity "+u.transitionSpeed+"ms ease-out"})}),f.data({num:0,initialized:!0}));break;case"flip":var l=function(){a.css({opacity:0}).show().css({transition:"opacity "+u.transitionSpeed+"ms"}),window.requestAnimationFrame(d)},d=function(){o.css({opacity:0}),a.css({opacity:1}),f.css({transform:"rotateY("+(b<0?"180":"-180")+"deg)",transition:"transform "+u.transitionSpeed+"ms"}).on("transitionend",function(t){window.requestAnimationFrame(D)})},D=function(){r(),f.css({transition:"none",transform:"rotateY(0)"})};o.length?(window.requestAnimationFrame(l),setTimeout(D,u.transitionSpeed+20)):a.show().css({opacity:1,transition:"opacity "+u.transitionSpeed+"ms"});break;case"book":f.children("."+c.paging).remove();var J,B,H,Y,q,G,R,U=u.fitPadding,z=f.width()-2*U,W=z/2,l=function(){f.children("."+c.prevPage).length&&f.find("."+c.prevPage+" ."+c.card).unwrap(),o.css({width:z,left:b>0?0:-W}).wrap(J=t("<div>",{class:c.prevPage})),a.css({opacity:0,width:z,left:b>0?-W:0}).wrap(B=t("<div>",{class:c.nextPage})).show(),H=t("<div>",{class:c.paging}).appendTo(f),Y=o.clone().css({left:b>0?"-100%":0}).appendTo(H),q=a.show().clone().css({opacity:1}).appendTo(H),G=t("<div>",{class:c.shade}).appendTo(Y),R=t("<div>",{class:c.shade}).hide().appendTo(q),H.show().css({transition:"transform "+u.transitionSpeed/2+"ms linear"}).data("ts",new Date),window.requestAnimationFrame(d)},d=function(){a.css({transition:"opacity "+u.transitionSpeed/2+"ms ease-in",opacity:1}),G.css({transition:"opacity "+u.transitionSpeed/2+"ms ease-in",opacity:.5}),H.one("transitionend",function(){window.requestAnimationFrame(Q)}).css({transform:"rotateY("+(b>0?"-90":"90")+"deg)"})},Q=function(){Y.hide(),q.css("backface-visibility","visible").show(),H.one("transitionend",function(t){window.requestAnimationFrame(D)}).css({transform:"rotateY("+(b>0?"-180":"180")+"deg)"}),R.show().add(o).css({transition:"opacity "+u.transitionSpeed/2+"ms ease-out",opacity:0})},D=function(){H.remove(),a.parent().hasClass(c.nextPage)&&a.unwrap("."+c.nextPage).css("left",U),r()};o.length?(window.requestAnimationFrame(l),setTimeout(D,u.transitionSpeed+20)):a.show().css({opacity:1,transition:"opacity "+u.transitionSpeed+"ms"});break;case"cube":var m=n(),h=Math.round(m[1]/2),d=function(){a.css({opacity:1,transform:"rotateX("+(b<0?"90":"270")+"deg) translateZ("+h+"px)"}).show(),f.css({transform:"translateZ("+h+"px) rotateX(0)"}).on("transitionend",function(t){o.remove(),window.requestAnimationFrame(D)}).css({transition:"transform "+u.transitionSpeed+"ms",transform:"translateZ(-"+h+"px) rotateX("+90*b+"deg)"})},D=function(){f.css({transition:"none",transform:"translateZ(-"+h+"px) rotateX(0)"}),a.css({transform:"rotateX(0) translateZ("+h+"px)"})};window.requestAnimationFrame(d);break;case"coverflow":var X=a.next(),Z=a.prev(),K=Z.prev(),h=n()[0]/8,l=function(){K.css({zIndex:0}),a.css({zIndex:2}),Z.length||a.css({opacity:1,transform:"scale(0.5) translate3d("+5.9*h+"px,0,-"+2*h+"px) rotateY(-86deg)"}).show(),X.css({zIndex:1,opacity:0,transform:"scale(0.4) translate3d("+11.6*h+"px,0,-"+3*h+"px) rotateY(-120deg)"}).show().css({willChange:"transform, opacity"}),a.add(Z).css({opacity:1,transition:"transform "+u.transitionSpeed+"ms ease-in-out"}),X.add(K).css({transition:"transform "+u.transitionSpeed+"ms ease-in-out, opacity "+u.transitionSpeed+"ms linear"}),window.requestAnimationFrame(d)},d=function(){Z.on("transitionend",function(){K.remove()}).css({transform:"scale(0.5) translate3d(-"+5.9*h+"px,0,-"+2*h+"px) rotateY(86deg)"}),X.css({opacity:1,transform:"scale(0.5) translate3d("+5.9*h+"px,0,-"+2*h+"px) rotateY(-86deg)"}),a.css({opacity:1,transform:"scale(0.75) translate3d(0,0,0) rotateY(0)"}),K.css({opacity:0,transform:"scale(0.4) translate3d(-"+11.6*h+"px,0,-"+3*h+"px) rotateY(120deg)"}),setTimeout(function(){window.requestAnimationFrame(Q)},.5*u.transitionSpeed)},Q=function(){a.css({zIndex:3}),Z.css({zIndex:1})};window.requestAnimationFrame(l)}u.auto&&!A&&(v=setTimeout(M,u.slideshowDelay+u.transitionSpeed))},H=function(e,a){"random"===u.ordering?x=e:(x=e%S,a=a?Math.min(a,S-x):0);var s=function(e){if(e>=T.length)return t();var a,n,s,l=t("<div>",{id:"c"+e,class:c.card+" "+(T[e][J.CATEGORY]||"folder")+" "+u.transitionType}).data("idx",e).appendTo(f),d=T[e];if(l.css("opacity",0).addClass(T[e][J.CATEGORY]),n=l.outerWidth()||f.outerWidth(),s=l.outerHeight()||f.outerHeight(),l.data("type",d[J.CATEGORY]),"folder"===d[J.CATEGORY]){var p=o.getThemeImagePath(d);a=t("<img>").attr("src",p),l.append(t("<div>",{class:"hero",content:""}).append(a)).append(t("<div>",{class:"album-title",html:d[J.FOLDERTITLE]||d[J.THUMBCAPTION]}))}else{a=t("<img>").appendTo(l);var h=t("<div>",{class:c.caption+" "+u.captionplacement+" "+u.captionstyle}),m=t("<div>",{class:"buttons"});if(u.printImage&&"image"===d[J.CATEGORY]&&!u.rightClickProtect&&t("<a>",{class:u.buttonClass+" icon-printer",title:r.print}).on("click",function(t){return printImage(d[J.ORIGINAL]&&u.showDownload?d[J.ORIGINAL][J.PATH]:d[J.IMAGE][J.PATH],d[J.TITLE]||"",d[J.THUMBCAPTION]||""),!1}).appendTo(m),u.showDownload&&("image"===d[J.CATEGORY]||u.allowDownloadOthers)){var g=o.getOriginalPath(d);!g&&u.allowDownloadScaled&&(g=o.getImagePath(d)),g&&t("<a>",{class:u.buttonClass+" icon-download",download:"",href:g,title:r.download}).appendTo(m)}if(!LOCAL&&typeof FOTOMOTO!==UNDEF&&u.fotomoto&&t("<a>",{class:u.buttonClass+" icon-fotomoto",title:r.fotomotoBtn}).on("click",function(t){FOTOMOTO.API.showWindow(10,o.getOriginalPath(d)||o.getItemPath(d))}).appendTo(m),d[J.PHOTODATA]&&t("<a>",{class:u.buttonClass+" icon-camera meta",title:'<div class="photodata">'+d[J.PHOTODATA]+"</div>"}).appendTo(m),d[J.REGIONS]&&t("<a>",{class:u.buttonClass+" icon-user",title:r.regionsLabel}).on("click",function(e){var a=l.find("."+u.regionsClass);if(a.length)a.remove();else{var n=JSON.parse(d[J.REGIONS]),o=l.find("img").eq(0);a=t("<div>",{class:u.regionsClass}).css({left:o.position().left,top:o.position().top,width:o.width(),height:o.height()}).appendTo(l);for(var s,i=0;i<n.length;i++)s=n[i].split(";"),a.append(t("<a>").css({left:100*parseFloat(s[1])+"%",top:100*parseFloat(s[2])+"%",width:100*parseFloat(s[3])+"%",height:100*parseFloat(s[4])+"%"}).append("<span>"+s[0]+"</span>"))}return!1}).appendTo(m),u.showMap&&d[J.LOCATION]){var w=function(){t("#map").addClass("on"),t(".map-root").trigger("setActive",d[J.NAME])};t("<a>",{class:u.buttonClass+" icon-location",title:r.mapBtn}).on("click",function(){return t(".map-root").data("rendered")?w():t(".map-root").trigger("render",w),!1}).appendTo(m)}u.showNumbers&&h.append(t("<span>",{class:"nr",html:e+1+" <em>"+T.length+"</em>"})),d[J.IMAGECAPTION]&&h.append(t("<div>",{class:"text",html:d[J.IMAGECAPTION]})),m.is(":empty")||(h.append(m),m.children().addTooltip()),h.is(":empty")||(l.append(h).addClass(u.hasCaptionClass),h.show()),a.attr("src",n>d[J.THUMB][J.WIDTH]||s>d[J.THUMB][J.HEIGHT]?o.getImagePath(d):o.getThumbPath(d)),i.rightClickProtect&&a.on("contextmenu",function(t){return t.preventDefault(),!1}),"video"!==d[J.CATEGORY]&&"audio"!==d[J.CATEGORY]||l.append(t("<a>",{class:"icon-play play-btn"}).on("click",N))}return a},l=function(e){if(T&&T.length>e){t("<img>").appendTo(n).hide().attr("src",o.getImagePath(T[e])).one("load",function(){t(this).remove()})}};if(v=clearTimeout(v),u.hasOwnProperty("onLoadStart")&&u.onLoadStart.call(this,e),a){for(var d=0;d<=a;d++)f.children("#c"+(e+d)).length||s((e+d)%S);f.waitAllImg(null,B),l((e+d)%S)}else{var p=f.children("#c"+e),h=p.length?p.find("img"):s(e);h.length&&h[0].naturalWidth?B(h):h.one("load",B),l((e+1)%S)}},Y=function(){h=p.outerWidth(),m=p.outerHeight(),p.removeClass("landscape portrait").addClass(h>=m?"landscape":"portrait"),L(!0)};if(l.find(i.selector).each(function(){T.push(t(this).data(J.OBJ))}),T.length){if(S=T.length,(p=l.children("."+c.projector)).length?p.data("projector")&&(u=t.extend({},i,p.data("projector"))):(p=t("<section>",{class:c.projector}).appendTo(l),u=i),(f=p.find("."+c.cards)).length||(f=t("<div>",{class:c.cards}).appendTo(p)),f.addClass(u.transitionType),(g=p.find("."+c.prev)).length||(g=t("<button>",{class:c.prev+" btn"}).appendTo(p)),g.on("click",function(){v&&j(),F()}),(w=p.find("."+c.next)).length||(w=t("<button>",{class:c.next+" btn"}).appendTo(p)),w.on("click",function(){v&&j(),I()}),u.hasOwnProperty("transitionType")||(u.transitionType=t.fn.projector.defaults.transitionTypes[Math.floor(Math.random()*t.fn.projector.defaults.transitionTypes.length)]),u.hasOwnProperty("slideshowDelay")||(u.slideshowDelay=t.fn.projector.defaults.timings[u.transitionType||"slide"][0]),u.hasOwnProperty("transitionSpeed")||(u.transitionSpeed=t.fn.projector.defaults.timings[u.transitionType||"slide"][1]),"slide"!==u.transitionType||u.hasOwnProperty("direction")||(u.direction="e"),y="carousel.flip.book.cube.coverflow".indexOf(u.transitionType)>=0,l.data("projector-ns",d="projector-"+Math.floor(1e4*Math.random())).attr("id",d),p.addClass(u.transitionType+" "+(h>m?"landscape":"portrait")+(y?" "+c.threedee:"")),T.length<S&&(S=T.length),Y(),e.on("resize."+d+" orientationchange."+d,function(){clearTimeout(C),C=setTimeout(Y,100)}),u.enableKeyboard&&a.on("keyup."+d,function(t){if(!p.length||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName))return!0;switch(t.preventDefault(),t.keyCode){case 33:case 37:F();break;case 34:case 39:I();break;case 97:case 35:H(T.length-1);break;case 103:case 36:H(0);break;case 106:case 179:case 32:v?j():E();break;default:return!0}return!1}),u.enableMouseWheel){var q=null;p.on("mousewheel."+d+" DOMMouseScroll."+d,function(t){return q=clearTimeout(q),q=setTimeout(t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?F:I,100),!1})}u.autoplay&&(v=setTimeout(M,u.slideshowDelay+u.transitionSpeed)),l.on({startAuto:function(e,a){u.useFullScreen&&t("html").fullScreen(!0),setTimeout(Y,100),E(a)},stopAuto:function(e){i.useFullScreen&&!TOUCHENABLED&&t("html").fullScreen(!1),setTimeout(Y,100),j()},loadImage:function(e,a){a=typeof a===UNDEF?x:function(e){if("number"==typeof e)return e<0?0:e>=T.length?T.length-1:e;if("string"!=typeof e){if(e instanceof t||(e=t(e)),!(e=e.find("img").eq(0)).length)return 0;e=e.attr("src").getFile()}if(!e)return 0;for(var a=0,n=T.length;a<n;a++)if(T[a][J.PATH]===e)return a;return 0}(a),"carousel"===u.transitionType?H(a,3):"coverflow"===u.transitionType?H(a,1):H(a),P=!0},removeProjector:function(){e.off("."+d),p.remove()},refresh:Y}),u.hasOwnProperty("onReady")&&u.onReady.call(this)}}})},t.fn.projector.defaults={selector:".thumbnails .thumb.lbable",projectorClass:"projector",ordering:"original",transitionTypes:["crossfade","zoom","kenburns","stack","slide","swap","carousel","flip","book","cube","coverflow"],timings:{crossfade:[1e3,2e3],zoom:[1e3,2e3],kenburns:[0,4e3],stack:[1500,1500],slide:[1500,1500],swap:[2e3,1e3],carousel:[2e3,1e3],flip:[2e3,1e3],book:[2e3,1e3],cube:[2e3,1e3],coverflow:[2e3,1e3]},fit:"both",fitPadding:0,scaleUp:!1,maxzoom:2,autoplay:!1,backgroundAudioSlideshowControl:!1,muteBackgroundAudio:!0,hideSidebar:!1,videoAuto:!1,useFullScreen:!1,loop:!0,enableKeyboard:!0,enableMouseWheel:!0,clickForNext:!0,afterLast:"donothing",mapHeight:.8,volume:.5,rightClickProtect:!1,captionplacement:"center bottom",captionstyle:"dark",showNumbers:!1,allowDownloadOthers:!1,allowDownloadScaled:!1,showDownload:!0,showMap:!1,showRegions:!1,printImage:!1,regionsClass:"regions",buttonClass:"btn",hasCaptionClass:"has-caption"},t.fn.projector.text={startOver:"Start over",upOneLevel:"Up one level",backToHome:"Back to home",backToCover:"Back to cover page",nextFolder:"Next folder",atLastPageQuestion:"Where to go next?",atLastPage:"At last page",atFirstPage:"At first page",download:"Download",print:"Print",printLabel:"Print out this photo on your printer",mapBtn:"Map",mapLabel:"Show the photo location on map",fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, share, send free eCards",regionsBtn:"People",regionsLabel:"Show tagged people",shopBtn:"Buy",metaBtn:"Photo data",metaLabel:"Display photographic (Exif/Iptc) data",clickToOpen:"Click to open this document with the associated viewer!"}}(jQuery,jQuery(window),jQuery(document),jQuery("body"));
!function(t){"use strict";var o=["left","center","right"],e=["top","middle","bottom"];t.fn.alignTo=function(s,n){if(n=t.extend({},t.fn.alignTo.defaults,n),"string"==typeof s&&(s=t(s)),s instanceof t&&s.length){var a,p,i,r=t(window).width(),l=t(window).height(),f="fixed"===s.css("position"),d=function(o){var e={left:0,top:0};return o.parents().each(function(){if("fixed"===t(this).css("position"))return e.left=t(window).scrollLeft(),e.top=t(window).scrollTop(),e}),e}(s);if("AREA"===s[0].nodeName&&"RECT"===s[0].shape.toUpperCase()){var g=s[0].coords.split(",");p=parseInt(g[2],10)-parseInt(g[0],10),i=parseInt(g[3],10)-parseInt(g[1],10),(a=s.parent().offset()).left+=parseInt(g[0],10),a.top+=parseInt(g[1],10)}else a=f?s.position():s.offset(),p=s.outerWidth(),i=s.outerHeight();return a.left-=d.left,a.top-=d.top,t(this).each(function(){var s=t(this),g=n.pos[2],h=n.pos[3];s.css("maxHeight","none");var c=s.outerWidth(),u=s.outerHeight(),v=Math.round(a.left+n.pos[2]*p/2+(n.pos[2]-1)*n.gap),m=Math.round(a.top+n.pos[3]*i/2+(n.pos[3]-1)*n.gap),w=Math.round(v-n.pos[0]*c/2),x=Math.round(m-n.pos[1]*u/2);(x<0||x+u>l)&&(1!==n.pos[2]?x=2*x+u>l?l-u:0:0===n.pos[3]?l>2*a.top+i&&(x=a.top+i+n.gap,h=2):2===n.pos[3]&&l<2*a.top+i&&(x=Math.max(0,a.top-u-n.gap),h=0),x<0&&(x=0)),(w<0||w+c>r)&&(1!==n.pos[3]?w=2*w+c>r?r-c:0:0===n.pos[2]?r>2*a.left+p&&(w=a.left+p+n.gap,g=2):2===n.pos[2]&&r<2*a.left+p&&(w=Math.max(0,a.left-c-n.gap),g=0),w<0&&(w=0),w+c>r&&s.css({maxWidth:r-w-(parseInt(s.css("paddingLeft"),10)+parseInt(s.css("paddingRight"),10))})),f?s.css({position:"fixed",left:w,top:x}):s.css({position:"absolute",left:w+d.left,top:x+d.top}),s.removeClass("align-left align-center align-right valign-top valign-middle valign-bottom").addClass("align-"+o[g]).addClass("valign-"+e[h])})}},t.fn.alignTo.defaults={gap:0,pos:[1,2,1,0]}}(jQuery);
!function(t){"use strict";t.fn.hideAllTooltips=function(){return this.each(function(){t(this).find("[data-tooltip-id]").each(function(){var e=t(this).attr("data-tooltip-id");e&&e.length&&t("#"+e).hide()})})},t.fn.destroyAllTooltips=function(){return this.each(function(){t(this).find("[data-tooltip-id]").each(function(){var e=t(this).attr("data-tooltip-id");e&&e.length&&t("#"+e).remove()})})},t.fn.addTooltip=function(e,o){typeof e===UNDEF||"string"==typeof e||e.jquery||(o=e,e=null),o=t.extend({},t.fn.addTooltip.defaults,o);return this.each(function(){if(this["data-tooltip-id"])return!0;var i,n,a,r,u,l=t(this),s=!1,f=!1,d=!1,c="_ltt_"+Math.floor(1e4*Math.random()),p=function(t){a=clearTimeout(a),s=!0,i.finish().show()},h=function(t){f||(clearTimeout(a),s=!1,a=setTimeout(m,100))},m=function(){n=clearTimeout(n),a=clearTimeout(a),s=!1,i&&i.stop(!0,!1).fadeOut(200,function(){i.hide()})},T=function(){var t=l.offset();r||(r=t),t.top===r.top&&t.left===r.left&&i.fadeIn(300).alignTo(l,{gap:o.gap,pos:o.pos})},v=function(){return!!i&&i.is(":visible")&&i.css("opacity")>.99},y=function(e){l.off("."+c),n=clearTimeout(n),a=clearTimeout(a),t("#"+l.attr("data-tooltip-id")).remove(),l.attr("data-tooltip-id",null)};l.attr("data-tooltip-id",c).on("destroyTooltip",y).on("removeTooltip",m).on("focus."+c+" mouseenter."+c+" "+TOUCH.START+"."+c,function(s){if(d=v(),u=new Date,r=l.offset(),i)i.stop(!0,!1),a=clearTimeout(a);else if(!(i=function(e,i){var n;if(i)if("string"==typeof i)n=t("<div>",{html:i}).appendTo("body");else{if(!i.jquery)return null;n=t.contains(document.body,i[0])?i:i.appendTo("body")}else{if((i=e.data("tooltip"))?("."===i.charAt(0)?i=e.find(i).eq(0):"#"===i.charAt(0)&&(i=t(i)),i.jquery&&i.removeClass("hidden")):(i=e.attr("title"),e.removeAttr("title")),!i||!i.length)return null;n=t("<div>",{html:i}).appendTo("body")}return n.is(":empty")?null:(n.attr("id",e.attr("data-tooltip-id")).addClass(o.className).attr("role","tooltip").attr("aria-hidden",!0).hide().append(t("<span>",{class:o.nub})),n)}(l,e))||(i.on("mouseover."+c,p).on("mouseout."+c,h),i.find("input, textarea").on("focus."+c,function(){f=!0,p()}).on("blur."+c,function(){f=!1}),0))return y(),!0;return clearTimeout(n),"mouse"===whatInput.ask("intent")&&(n=setTimeout(T,o.delay)),!0}).on("blur."+c+" mouseleave."+c,function(t){a="mouse"===whatInput.ask("intent")?setTimeout(m,100):setTimeout(m,3e3)}).on("click."+c,function(e){if(n=clearTimeout(n),"mouse"===whatInput.ask()){var i=new Date;if(o.touchToggle||i-u>1e3)return!(!function(o){var i=t(e.target).closest("a");return i.length&&i.attr("href")&&!i.attr("href").startsWith("javascript")}()||!v())||(function(t){t.preventDefault(),n=clearTimeout(n),a=clearTimeout(a)}(e),d?m():T(),!1)}return d&&(a=clearTimeout(a),m()),s=!1,!0})})},t.fn.addTooltip.defaults={delay:50,className:"tooltip",nub:"nub",stay:2e3,touchToggle:!1,pos:[1,2,1,0],gap:6}}(jQuery);
!function(e,t,o){"use strict";e.fn.modal=function(n,a,s){if("string"==typeof n&&(n=e(document.createTextNode(n))),n instanceof e&&n.length){e.isArray(a)||(s=a,a=null),s=e.extend({},e.fn.modal.defaults,s);var l,d,i,c,r=e(this),u=getTranslations(e.fn.modal.text),h=!1,f="lmo_"+Math.floor(1e4*Math.random()),p=null,m=null,T=function(){c.css({overflow:"auto",maxHeight:.8*t.height()-(d.hasClass("has-header")?i.height():0)})},v=function(){return p=clearTimeout(p),l.destroyAllTooltips().fadeOut(s.speed,function(){h?l.hide().css("opacity",1):l.remove(),t.off("."+f)}),o.removeClass("has-modal"),!1};return function(){if(e.contains(document.documentElement,n[0]))d=(l=n).children().eq(0),i=d.find(".close").eq(0),c=d.find(".content").eq(0),h=!0;else if(l=e("<div>",{class:"modal"}).appendTo(r),d=e("<div>",{class:"window "+(s.class||""),role:"dialog"}).appendTo(l),(i=e("<a>",{class:"btn close",title:u.closeWindow}).appendTo(d)).addTooltip(),c=e("<div>",{class:"content"}).appendTo(d),s.title&&d.addClass("has-header").prepend(e("<header>",{text:s.title})),c.append(n.show()),a){var t,f,p=e("<div>",{class:"buttons"}).appendTo(c),m=function(t){t.preventDefault();var o=t.target;return e.isFunction(o.handler)&&!1!==o.handler.call(this)&&v(),!1};for(t=0;t<a.length;t++)f=e("<button>",{class:"button "+(a[t].c||""),html:" "+a[t].t}).on("click",m).appendTo(p),e.isFunction(a[t].h)&&(f[0].handler=a[t].h)}l.hide().css("opacity",1).fadeIn(s.speed),o.addClass("has-modal"),l.on("destroy",v),l.on("close",v),i.add(l).on("click",function(t){t.target===this&&(e.isFunction(s.onClose)&&s.onClose.call(this),v())}),T()}(),s.autoFade&&(p=setTimeout(v,s.autoFade)),t.on("resize."+f,function(){clearTimeout(m),m=setTimeout(T,20)}),this}},e.fn.modal.defaults={speed:300,autoFade:0,width:400,type:"normal"},e.fn.modal.text={closeWindow:"Close window"}}(jQuery,jQuery(window),jQuery("body"));
!function(e,a,s,t,n){"use strict";e.fn.selectable=function(a){a=e.extend({cardClass:"thumb",checkboxClass:"checkbox",checkedClass:"checked",noneSelected:null,anySelected:null},a);var s,t=e(this).eq(0),n=function(){return s.filter("."+a.checkedClass).length},l=function(s){var t=e(s.target).closest("."+a.cardClass),l=n();return t.hasClass(a.checkedClass)?(t.removeClass(a.checkedClass),1===l&&e.isFunction(a.noneSelected)&&a.noneSelected.call()):(t.addClass(a.checkedClass),0===l&&e.isFunction(a.anySelected)&&a.anySelected.call()),!1},o=function(){(s=a.selector?t.find(a.selector):t.find("."+a.cardClass)).each(function(){e(this).children("span."+a.checkboxClass).length||e(this).append(e("<span>",{class:a.checkboxClass}).on({click:l}))})};return o(),t.on({selectAll:function(){if(t.is(":visible")){var l=n();l<s.length&&(s.not("."+a.checkedClass).addClass(a.checkedClass),0===l&&e.isFunction(a.anySelected)&&a.anySelected.call())}},selectNone:function(){if(t.is(":visible")){var l=n();l&&(s.filter("."+a.checkedClass).removeClass(a.checkedClass),l>0&&e.isFunction(a.noneSelected)&&a.noneSelected.call())}},selectInverse:function(){if(t.is(":visible")){var l=n();s.toggleClass(a.checkedClass),0===l&&e.isFunction(a.anySelected)?a.anySelected.call():l===s.length&&e.isFunction(a.noneSelected)&&a.noneSelected.call()}},selectRefresh:o}),this},e.fn.skin=function(s){s=e.extend({},e.fn.skin.defaults,s);var n,l,o,r,i,c=e(this),d=getTranslations({foundNTimes:"found {0} time(s)",notFound:"not found",search:"Search",newImages:"New images",label:"Label",addCart:"Add to cart",return:"return",inTheLastDay:"in the last day",inThePastNDays:"in the past {0} days",sinceMyLastVisit:"since my last visit",imagesAdded:"Images added",imagesModified:"Images modified",imagesTaken:"Images taken",cookiePolicyText:"This album uses cookies to remember user preferences. By using it, you agree to our use of cookies.",cookiePolicyAgree:"Got it",cookiePolicyLearnMore:"Learn more",newItem:"NEW",more:"more",less:"less"}),h="",u=""!==window.location.hash,f=new Date/864e5,m=function(){var t,n,l;return c.children(s.contentHook).each(function(){(t=e(this)).data("base")?l=t:((n=t.data("oly_ns"))&&a.off("."+n),t.destroyAllTooltips(),t.trigger("projectorRemove"),t.remove())}),l},p=function(a){var t="oly_"+Math.floor(1e4*Math.random());return(a=e("<article>",{class:s.contClass+" overlay thumbs-"+s.thumbsPosition}).data("oly_ns",t).appendTo(c))[0].overlay=t,a},g=function(a){var s=m();c.addClass("has-overlay"),s.hide();var t=p(),n=e("<header>").appendTo(t);return a&&a.hasOwnProperty("title")&&n.append(e("<h4>",{html:a.title})),n.append(e("<button>",{class:"close","aria-label":d.return}).on("click",function(){return C(),!1}).addTooltip(d.return,{pos:[0,1,2,1]})),b=t},C=function(){var e=m();return c.removeClass("has-overlay"),removeParam(s.indexName),e.show(),setTimeout(function(e){e.trigger("loadImage"),B()},100,e),b=e},b="index"===s.pageType?function(){var e=c.children(s.contentHook).last();if(e.length||(e=p()),!e.data("oly_ns")){var a="oly_"+ +Math.floor(1e4*Math.random());e.data("oly_ns",a)}return e.data("base")||e.data("base",!0),e}():e(),v=function(e){return b.find("."+s.thumbContClass+(e?" "+e:""))},y=function(a){var t=e();return v("."+s.thumbClass).each(function(){var s=decodeURIComponent(e(this).attr("href")||e(this).data("href"));if(s&&(s===a||s.endsWith("/"+a)))return t=e(this),!1}),t},k=function(a){var t=[];return v("."+s.thumbClass+"."+s.checkedClass).each(function(){a&&e(this).removeClass(s.checkedClass),t.push(e(this).data(J.OBJ))}),t},w=function(a){return b.trigger("loadImage",e(a.target).closest("a")),!1},P=function(a,t){var n=v(),l="number"==typeof t?n.children("a").eq(t):e(t),o=n.children("a."+s.activeClass);l&&l.length&&l!==o&&(o.removeClass(s.activeClass),l.addClass(s.activeClass),n.trigger("scrollToActive",l))},N=function(a,t,n){var l,o,r=v(),c=r.closest("article"),d=c.hasClass("thumbs-left")||c.hasClass("thumbs-right"),t=typeof t===UNDEF?r.position()[d?"top":"left"]:t,h=d?c.height():c.width(),u=e();r.children("a."+s.lazyloadClass).filter(function(){var a=e(this).position()[d?"top":"left"]+t;return a+h/2>=0&&a-2*h<=0}).each(function(){(l=e(this)).children("img").length||(o=e("<img>",{class:s.hideImageClass}).one("load",function(){e(this).addClass(s.showImageClass).removeClass(s.hideImageClass),e(this).parent().removeClass(s.lazyloadClass)}).attr("src",i.getThumbPath(l.data(J.OBJ))).appendTo(l),u.append(o))}),e.isFunction(n)&&(u.length?u.waitAllImg(n):n.call())},T=function(a,t,n,o){if(typeof a!==UNDEF&&a.length&&e.isArray(a)){var c=b.data("oly_ns"),d=[1,2,1,0],h=function(){var a=b.children("."+s.thumbsClass);return a.length?a:e("<section>",{class:s.thumbsClass}).appendTo(b)}(),u=function(){var a=h.children("."+s.clipClass);return a.length?a:e("<div>",{class:s.clipClass}).appendTo(h)}(),m=function(){var a=u.children("."+s.thumbContClass);return a.length?a:e("<div>",{class:s.thumbContClass}).appendTo(u)}();return c||b.data("oly_ns",c="oly_"+Math.floor(1e4*Math.random())),b.hasClass("thumbs-right")?d=[2,1,0,1]:b.hasClass("thumbs-left")?d=[0,1,2,1]:b.hasClass("thumbs-top")&&(d=[1,0,1,2]),function(){for(var t,n,o,h,u=m.children("."+s.thumbClass),p=(new Date,0);p<a.length;p++)h=a[p],p<u.length?((n=(t=u.eq(p)).find("img").eq(0)).addClass(s.hideImageClass).on("load."+c,function(){e(this).addClass(s.showImageClass).removeClass(s.hideImageClass).parents("a").removeClass(s.preloadClass)}),n[0].complete&&n.trigger("load"),t.attr("title")&&t.addTooltip({pos:d})):(t=e("<a>",{class:s.thumbClass+" "+s.lazyloadClass}).attr("href",i.getItemPath(h)).appendTo(m),(o=h[J.THUMBCAPTION])&&t.addTooltip(o.stripHTML(),{pos:d})),t.data(J.OBJ,h),i.isLightboxable(h)?(t.addClass(s.lbableClass),t.on("click."+c,w),s.rightClickProtect&&t.on("contextmenu",function(e){return e.preventDefault(),!1}),(l&&i.hasShop(h)||r&&s.feedback)&&t.addClass(s.selectableClass)):(t.addClass(h[J.CATEGORY]),t.attr("href",i.getItemPath(h))),s.markNew&&h.hasOwnProperty(J.MODIFIEDDAYS)&&f-h[J.MODIFIEDDAYS]<s.markNew&&t.append(e("<span>",{class:"icon-star new-image"}).addTooltip(new Date(864e5*h[J.MODIFIEDDAYS]).toLocaleDateString(),{pos:d})),s.rightClickProtect&&t.on("contextmenu",function(e){return e.preventDefault(),!1});N()}(),h.thumbScroll(),h.on("lazyloadThumbs",N),b.on("setActiveThumb",P),e.isFunction(t)&&(typeof n!==UNDEF?typeof o!==UNDEF?t.call(void 0,h,n,o):t.call(void 0,h,n):t.call(void 0,h)),b}},x=function(t,n){var l=g({className:"tags-found",icon:"icon-label",title:"&ldquo;"+t+"&rdquo;"}),o=l.find("header h4");o.append(e("<span>",{class:"progressbar"})),(l.offset().top<a.scrollTop()||l.offset().top>a.scrollTop()+a.height()-100)&&a.scrollTop(l.offset().top),i.collectItems(e.extend(s.tagCloud,{exact:s.exactFields,terms:t,ready:function(){o.find(".progressbar").remove(),o.append(e("<small>",{text:this.length?d.foundNTimes.replace("{0}",this.length):d.notFound})),T(this,A),n&&n.call()}}))},I=function(a,t){var n=g({className:"search-results",icon:"icon-search",title:"&ldquo;"+a+"&rdquo;"}).find("header h4");n.append(e("<span>",{class:"progressbar"})),setTimeout(function(){i.collectItems(e.extend(s.search,{exact:!1,terms:a,ready:function(){n.find(".progressbar").remove(),n.append(e("<small>",{text:this.length?d.foundNTimes.replace("{0}",this.length):d.notFound})),T(this,A),t&&t.call()}}))},50)},S=function(a){if(a.length&&i){s.search=e.extend({depth:"tree",fields:"creator,keywords,title,comment"},s.search);var t=function(e){var a=e.find("input").eq(0).val();return a&&a.length>1&&(e.closest(".panel").add("aside .btn").removeClass("on"),I(a,function(){setParam(s.indexName,{search:a},d.search+": "+a),B()})),!1};a.find(".search-btn, button").on("click",function(){return a.hasClass(s.activeClass)?(t(a),a.removeClass(s.activeClass)):(a.find("input").eq(0).focus(),a.addClass(s.activeClass)),!1}),a.on("submit",function(e){return e.preventDefault(),t(a),a.removeClass(s.activeClass),!1}),a.find("input").on({focus:function(){a.addClass(s.activeClass)}})}},O=function(e){return"dateTaken"==e?d.imagesTaken:"fileModified"==e?d.imagesModified:d.imagesAdded},D=function(a,t){var n=g({className:"search-results",icon:"icon-star",title:O(s.searchNew.reference)+" "+getTimespan(a)}).find("header h4");n.append(e("<span>",{class:"progressbar"})),setTimeout(function(){i.collectByDate(e.extend(s.searchNew,{range:a,ready:function(){n.find(".progressbar").remove(),n.append(e("<small>",{text:this.length?d.foundNTimes.replace("{0}",this.length):d.notFound})),T(this,A),t&&t.call()}}))},50)},M=function(e){return e&&D(e,function(){setParam(s.indexName,{newimages:e},O(s.searchNew.reference)+" "+getTimespan(e)),B()}),!1},A=function(a,t){i&&((i.hasShop()||s.feedback)&&(a.find(".selectable").length?(a.selectable({cardClass:"selectable",checkedClass:s.checkedClass,anySelected:function(){e("."+s.selectNoneClass+",."+s.addSelectedClass).removeClass("disabled")},noneSelected:function(){e("."+s.selectNoneClass+",."+s.addSelectedClass).addClass("disabled")}}),e("#shop,#feedback").show(),e("."+s.selectAllClass).removeClass("disabled")):e("#shop,#feedback").hide(),e("."+s.selectNoneClass+",."+s.addSelectedClass).addClass("disabled")),b.projector(i,{onLoadStart:function(e){if(z())removeParam(s.indexName,"img");else{var t=a.find(".thumb.lbable").eq(e).data(J.OBJ);addParam(s.indexName,{img:i.getItemName(t)},t[J.TITLE])}},onLoadEnd:function(e){a.trigger("setActiveThumb",e)},onReady:function(){if(b.data("base")&&s.autoStart?(U(),L()):j(),u&&window.location.hash){u=!1;var a=readParam();if(b.removeClass(s.coverDownClass).addClass(s.coverUpClass),a.hasOwnProperty("label")&&null!==a.label)x(a.label,function(){addParam(s.indexName,{label:a.label+"",search:null,newimages:null},d.label+": "+a.label),b.trigger("loadImage",a.img?y(a.img):0)});else if(a.hasOwnProperty("search")&&null!==a.search)I(a.search,function(){addParam(s.indexName,{search:a.search+"",label:null,newimages:null},d.search+": "+a.search),b.trigger("loadImage",a.img?y(a.img):0)});else if(a.hasOwnProperty("newimages"))D(a.newimages,function(){addParam(s.indexName,{newimages:a.newimages,search:null,label:null},d.searchNew+": "+a.searchNew),b.trigger("loadImage",a.img?y(a.img):0)});else if(a.hasOwnProperty("img")&&null!==a.img){var t=y(a.img);t.length?b.trigger("loadImage",t):removeParam(s.indexName,"img")}}else b.trigger("loadImage",0);e("."+s.startshowClass).fadeIn().children(".button").on("click",F)},onQuit:function(){q(),j()},onSlideshowStart:function(){b.removeClass(s.pausedClass).addClass(s.playingClass),c.removeClass("paused").addClass("playing"),s.hasOwnProperty("backgroundMusic")&&s.backgroundMusic.slideshowControl&&e(s.backgroundMusic.hook).trigger("startPlayer")},onSlideshowPause:function(){b.removeClass(s.playingClass).addClass(s.pausedClass),c.removeClass("playing").addClass("paused"),s.hasOwnProperty("backgroundMusic")&&s.backgroundMusic.slideshowControl&&e(s.backgroundMusic.hook).trigger("pausePlayer")}}))},F=function(e){var a=v("."+s.activeClass+":first-child");return a.length||(a=v("."+s.thumbClass+":first-child")),a.length&&b.trigger("loadImage",[a,!0]),!1},L=function(){E()||(b.trigger("startAuto"),b.removeClass(s.pausedClass).addClass(s.playingClass),c.removeClass(s.pausedClass).addClass(s.playingClass))},j=function(){E()&&(b.trigger("stopAuto"),b.removeClass(s.playingClass).addClass(s.pausedClass),c.removeClass(s.playingClass).addClass(s.pausedClass))},E=function(){return b.hasClass("playing")},U=function(){e(".folder-image").trigger("removeTooltip");var a=v().find(".thumb.lbable.active");if(a.length){var t=a.data(J.OBJ);addParam(s.indexName,{img:i.getItemName(t)},t[J.TITLE])}b.removeClass(s.coverDownClass).addClass(s.coverUpClass)},q=function(){b.data("base")&&(removeParam(s.indexName,"img"),b.removeClass(s.coverUpClass).addClass(s.coverDownClass))},z=function(){return b.data("base")&&!b.hasClass(s.coverUpClass)},_=function(){if(window.location.hash!==h){h=window.location.hash;var e=readParam();if(e.hasOwnProperty("label"))x(e.label,function(){setParam(s.indexName,{label:e.label},d.label+": "+e.label),B()});else if(e.hasOwnProperty("search"))I(e.search,function(){setParam(s.indexName,{search:e.search},d.search+": "+e.search),B()});else if(e.hasOwnProperty("newimages"))D(e.newimages,function(){setParam(s.indexName,{newimages:e.newimages},d.newImages+": "+e.newimages),B()});else if(e.hasOwnProperty("img")){var a=y(e.img);a.length?b.trigger("loadImage",a):removeParam(s.indexName,"img")}else q(),C()}},B=function(){s.hasOwnProperty("share")&&v().trigger("projectorContainer").is(":visible")&&e(s.share.hook).trigger("updateLinks")};window.location.search&&removeSearch(),"index"===s.pageType&&(typeof Album===UNDEF&&console.log("Critical Error: Missing jalbum.album.js library!"),i=new Album(e,{makeDate:s.makeDate,indexName:s.indexName,rootPath:s.rootPath,relPath:s.relPath,audioPoster:s.audioPoster,videoPoster:s.videoPoster,ready:"index"===s.pageType?function(){if(i){var a=i.getImages();e.fn.hasOwnProperty("paypal")&&(e.fn.paypal.defaults.relPath=s.relPath,e.fn.paypal.defaults.rootPath=s.rootPath,n=e("section#shop"),(l=e("#shop-root").paypal(i))&&(n.find("."+s.selectAllClass).on("click",function(){return v().trigger("selectAll"),!1}),n.find("."+s.selectNoneClass).on("click",function(){return v().trigger("selectNone"),!1}),n.find("."+s.addSelectedClass).on("click",function(){return l.trigger("addItems",k(!0)),v().trigger("selectNone"),!1}),e.fn.projector.defaults.hasOwnProperty("shop")||(e.fn.projector.defaults.shop={}),e.fn.projector.defaults.shop.root=l)),s.hasOwnProperty("feedback")&&(e.fn.feedback.defaults.relPath=s.relPath,e.fn.feedback.defaults.rootPath=s.rootPath,o=e("section#feedback"),(r=e("#feedback-root").feedback(i,s.feedback)).length&&(o.find("."+s.selectAllClass).on("click",function(){return v().trigger("selectAll"),!1}),o.find("."+s.selectNoneClass).on("click",function(){return v().trigger("selectNone"),!1}),o.find("."+s.addSelectedClass).on("click",function(){return r.trigger("addItems",k(!0)),v().trigger("selectNone"),!1}))),a.length?(T(a,A,!0),s.hasOwnProperty("map")&&s.map.index&&(e(".map-root").addMap({markers:function(e){for(var a=[],s=0;s<e.length;s++)e[s].hasOwnProperty("location")&&a.push({title:[s+".",e[s][J.TITLE],e[s][J.COMMENT]].join(" "),pos:e[s][J.LOCATION],link:e[s][J.NAME]});return a}(a),type:s.map.type||"roadmap",zoom:s.map.zoom||16,fitBounds:!0,fullscreenControl:!0,onMarkerClick:function(){this.link&&(C(),b.removeClass(s.pausedClass+" "+s.coverDownClass).addClass(s.playingClass+" "+s.coverUpClass),b.trigger("loadImage",y(this.link)))}}),e("#map-btn").on("click",function(){e(".map-root").data("rendered")||setTimeout(function(a){a.hasClass("on")&&e(".map-root").trigger("render")},20,e(this))}))):window.location.hash&&_(),s.hasOwnProperty("tagCloud")&&(s.tagCloud.hasOwnProperty("searchHook")&&function(){var a=e(s.tagCloud.searchHook);if(a.length&&i){var t=function(e){var a=e.find("input").eq(0).val();return a&&a.length>1&&(e.closest(".panel").add("aside .btn").removeClass("on"),x(a,function(){setParam(s.indexName,{label:a},d.label+": "+a),B()})),!1};a.find(".search-btn, button").on("click",function(){return a.find("input").eq(0).focus(),t(a),!1}),a.on("submit",function(e){return e.preventDefault(),t(a),!1})}}(),i.collectTags(e.extend(s.tagCloud,{exact:s.exactFields,ready:function(){!function(a){if(a.length){var t=e(s.tagCloud.hook);if(t.length)for(var n,l,o,r=function(){var a=e(this).children("span").eq(0).text();return e(this).closest(".panel").add("aside .btn").removeClass("on"),a&&a.length>1&&x(a,function(){setParam(s.indexName,{label:a},d.label+": "+a),B()}),!1},i=0,c=a.length;i<c;i++){if((n=e("<a>",{class:"tag"}).append(e("<span>",{html:a[i][0]}))).on("click",r),a[i][1]>1){if(s.tagCloud.fontVaries){for(l=0,o=Math.min(64,a[i][1]);o>1;)l++,o>>=1;n.addClass("size-"+l)}n.append("&nbsp;").append(e("<sup>",{text:a[i][1]}))}t.append(n)}}}(this)}}))),s.hasOwnProperty("search")&&S(e(s.search.hook)),s.hasOwnProperty("searchNew")&&function(a){if(a.length&&i){s.searchNew=e.extend({days:"3,30,90",depth:"folder",reference:"added",sinceLastVisit:!0},s.searchNew);var t=s.searchNew.days.split(",");a.append(e("<label>",{text:O(s.searchNew.reference)}));for(var n=0;n<t.length;n++)a.append(e("<a>",{class:"smallbtn",text:getTimespan(t[n])}).data("days",parseInt(t[n],10)).on("click",function(){M(e(this).data("days"))}));if(s.searchNew.sinceLastVisit){var l=e.cookie("lastVisit"),o=Math.ceil(new Date/864e5);l&&l<o&&a.append(e("<a>",{class:"smallbtn",text:d.sinceMyLastVisit}).on("click",function(){M(o-l)})),e.cookie("lastVisit",o,31536e4)}}}(e(s.searchNew.hook))}}:function(){s.hasOwnProperty("search")&&S(e(s.search.hook))}}),passDefaults(s,e.fn.projector.defaults,"indexName,level,autoStart,previousFoldersLast,nextFoldersFirst,rightClickProtect,enableKeyboard,enableMouseWheel,extraSizes"),passDefaults(s.projector,e.fn.projector.defaults),passDefaults(s,e.fn.thumbScroll.defaults,"activeClass,disabledClass,thumbContClass,thumbsPosition,enableMouseWheel")),passDefaults(s,e.fn.addMap.defaults,"type,zoom,apiKey"),s.hasOwnProperty("share")&&(e.fn.renderShares.defaults.buttonTheme=s.share.buttonTheme||"dark",e.fn.renderShares.defaults.facebookAppId=s.share.facebookAppId||"",e(s.share.hook).renderShares(s.share),"facebook"!==s.share.sites&&(e.fn.projector.defaults.share=s.share.sites.replace("facebook,","").replace(",facebook",""))),e("[data-audioPlayer]").length&&e("[data-audioPlayer]").audioPlayer({rootPath:s.rootPath}),a.on("hashchange.projector_skin",_),v().length&&(e(".btn.play,.btn.autoplay").on("click",function(){U(),L()}),e(".album-title .folder-image>.image").on("click",U),e(".btn.pause").on("click",function(){j()}),e(".topnav ."+s.actualClass).on("click",function(a){if(e(a.target).closest("li").hasClass(s.actualClass))return z()?(U(),L()):(j(),q()),!1}),e(".hero-handle").on("click",function(){z()?U():(j(),q())}),this.getAlbum=function(){return i}),e("[data-tooltip]").addTooltip(),e(".panel>.close").on("click",function(){e(this).parent().add("aside .btn").removeClass("on")}),e("aside .btn").on("click",function(){var a=e(this).data("rel"),s=e("#"+a),t=e("#"+a).hasClass("on");s.length&&(e(".panel").add("aside .btn").removeClass("on"),s.add(e(this)).toggleClass("on",!t))}),s.hasOwnProperty("showCookiePolicy")&&s.showCookiePolicy&&setTimeout(function(){if(!e.cookie("cookiePolicy")){var a=e("<div>",{id:"cookiepolicy"}).appendTo(t),n=e("<p>",{html:d.cookiePolicyText}).appendTo(a);s.cookiePolicyUrl&&n.append(e("<a>",{text:d.cookiePolicyLearnMore,target:"_blank",href:s.cookiePolicyUrl})),n.append(e("<a>",{class:"smallbtn",text:d.cookiePolicyAgree}).on("click",function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()}),e.cookie("cookiePolicy",!0,36e6)})),a.fadeIn(500),setTimeout(function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()})},6e3)}},2e3)},e.fn.skin.defaults={contentHook:"article.cont",contClass:"cont",coverUpClass:"cover-up",coverDownClass:"cover-down",playingClass:"playing",pausedClass:"paused",folderClass:"folder",thumbsClass:"thumbnails",clipClass:"clip",thumbContClass:"thumb-cont",thumbClass:"thumb",actualClass:"actual",cardClass:"card",lbableClass:"lbable",captionClass:"caption",commentClass:"comment",showImageClass:"show-image",hideImageClass:"hide-image",selectableClass:"selectable",hascaptionClass:"hascaption",checkedClass:"checked",activeClass:"active",preloadClass:"preload",lazyloadClass:"lazyload",startshowClass:"startshow",selectAllClass:"select-all",selectNoneClass:"select-none",addSelectedClass:"add-selected",scrollCheckInterval:100,indexName:"index.html",audioPoster:"audio.poster.png",videoPoster:"video.poster.png",exactFields:"creator,keywords",thumbsPosition:"top",autoStart:!1,rightClickProtect:!1,enableKeyboard:!0}}(jQuery,jQuery(window),jQuery(document),jQuery("body"));
